{"data":{"date":"2019-01-01T05:00:00.000Z","permalink":"/entry/2019/01/01/first-rails/","title":"重い腰を上げてRailsを見る","_entry":"posts/rb/first-rails.md","page":"post","name":"first-rails","category":"rb","url":"/entry/2019/01/01/first-rails/"},"content":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"TL;DR","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":8,"offset":8}}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":8,"offset":8}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"いろんな会社に話を聞きに行ったが、まだまだ世界はRails","position":{"start":{"line":4,"column":3,"offset":12},"end":{"line":4,"column":32,"offset":41}}}],"position":{"start":{"line":4,"column":1,"offset":10},"end":{"line":4,"column":32,"offset":41}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"そうだRailsを学ぼう","position":{"start":{"line":5,"column":3,"offset":44},"end":{"line":5,"column":15,"offset":56}}}],"position":{"start":{"line":5,"column":1,"offset":42},"end":{"line":5,"column":15,"offset":56}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"とりあえず数時間だけ作った、 getting startedを進めていきたい","position":{"start":{"line":6,"column":3,"offset":59},"end":{"line":6,"column":41,"offset":97}}}],"position":{"start":{"line":6,"column":1,"offset":57},"end":{"line":6,"column":41,"offset":97}}},{"type":"text","value":"\n"}],"position":{"start":{"line":4,"column":1,"offset":10},"end":{"line":6,"column":41,"offset":97}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/9renpoto/rb"},"children":[{"type":"text","value":"https://github.com/9renpoto/rb","position":{"start":{"line":8,"column":2,"offset":100},"end":{"line":8,"column":32,"offset":130}}}],"position":{"start":{"line":8,"column":1,"offset":99},"end":{"line":8,"column":33,"offset":131}}}],"position":{"start":{"line":8,"column":1,"offset":99},"end":{"line":8,"column":33,"offset":131}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Rubyを手に入れる","position":{"start":{"line":10,"column":4,"offset":136},"end":{"line":10,"column":14,"offset":146}}}],"position":{"start":{"line":10,"column":1,"offset":133},"end":{"line":10,"column":14,"offset":146}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"brew install ruby"}],"position":{"start":{"line":12,"column":3,"offset":150},"end":{"line":12,"column":22,"offset":169}}},{"type":"text","value":" で雑に使っていたわけだが流石にバージョンを固定する","position":{"start":{"line":12,"column":22,"offset":169},"end":{"line":12,"column":48,"offset":195}}},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"過去はrbenvを使っていたけれど ","position":{"start":{"line":13,"column":5,"offset":200},"end":{"line":13,"column":23,"offset":218}}},{"type":"element","tagName":"a","properties":{"href":"https://github.com/daenney/rbenv"},"children":[{"type":"text","value":"using asdf instend","position":{"start":{"line":13,"column":24,"offset":219},"end":{"line":13,"column":42,"offset":237}}}],"position":{"start":{"line":13,"column":23,"offset":218},"end":{"line":13,"column":77,"offset":272}}},{"type":"text","value":" らしいので別で検討する","position":{"start":{"line":13,"column":77,"offset":272},"end":{"line":13,"column":89,"offset":284}}},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/oh-my-fish/plugin-rbenv"},"children":[{"type":"text","value":"omf/plugin-rbenv","position":{"start":{"line":14,"column":8,"offset":292},"end":{"line":14,"column":24,"offset":308}}}],"position":{"start":{"line":14,"column":7,"offset":291},"end":{"line":14,"column":69,"offset":353}}},{"type":"text","value":" でも良かったけれど更新されてない","position":{"start":{"line":14,"column":69,"offset":353},"end":{"line":14,"column":86,"offset":370}}}],"position":{"start":{"line":14,"column":5,"offset":289},"end":{"line":14,"column":86,"offset":370}}},{"type":"text","value":"\n"}],"position":{"start":{"line":14,"column":5,"offset":289},"end":{"line":14,"column":86,"offset":370}}}],"position":{"start":{"line":13,"column":3,"offset":198},"end":{"line":14,"column":86,"offset":370}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"とりあえずメンテされてそうな ","position":{"start":{"line":15,"column":5,"offset":375},"end":{"line":15,"column":20,"offset":390}}},{"type":"element","tagName":"a","properties":{"href":"https://github.com/rstacruz/fish-asdf"},"children":[{"type":"text","value":"rstacruz/fish-asdf","position":{"start":{"line":15,"column":21,"offset":391},"end":{"line":15,"column":39,"offset":409}}}],"position":{"start":{"line":15,"column":20,"offset":390},"end":{"line":15,"column":79,"offset":449}}},{"type":"text","value":" を入れる","position":{"start":{"line":15,"column":79,"offset":449},"end":{"line":15,"column":84,"offset":454}}}],"position":{"start":{"line":15,"column":3,"offset":373},"end":{"line":15,"column":84,"offset":454}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"asdf"}],"position":{"start":{"line":16,"column":5,"offset":459},"end":{"line":16,"column":11,"offset":465}}},{"type":"text","value":" そのものは ","position":{"start":{"line":16,"column":11,"offset":465},"end":{"line":16,"column":18,"offset":472}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"brew"}],"position":{"start":{"line":16,"column":18,"offset":472},"end":{"line":16,"column":24,"offset":478}}},{"type":"text","value":" で入れて、かつ ","position":{"start":{"line":16,"column":24,"offset":478},"end":{"line":16,"column":33,"offset":487}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"/usr/local/bin"}],"position":{"start":{"line":16,"column":33,"offset":487},"end":{"line":16,"column":49,"offset":503}}},{"type":"text","value":" を使っていないためイマイチ動きが合わない","position":{"start":{"line":16,"column":49,"offset":503},"end":{"line":16,"column":70,"offset":524}}}],"position":{"start":{"line":16,"column":3,"offset":457},"end":{"line":16,"column":70,"offset":524}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/asdf-vm/asdf#setup"},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"asdf"}],"position":{"start":{"line":17,"column":6,"offset":530},"end":{"line":17,"column":12,"offset":536}}},{"type":"text","value":" 公式","position":{"start":{"line":17,"column":12,"offset":536},"end":{"line":17,"column":15,"offset":539}}}],"position":{"start":{"line":17,"column":5,"offset":529},"end":{"line":17,"column":55,"offset":579}}},{"type":"text","value":" の方法でactivateする（","position":{"start":{"line":17,"column":55,"offset":579},"end":{"line":17,"column":71,"offset":595}}},{"type":"element","tagName":"a","properties":{"href":"https://github.com/9renpoto/dotfiles/commit/ac00ecbeda4c16a3e741ab14158aad682241c1ce#diff-66758e6f92b7dd7008c34229fe0c9fe1R14"},"children":[{"type":"text","value":"refs","position":{"start":{"line":17,"column":72,"offset":596},"end":{"line":17,"column":76,"offset":600}}}],"position":{"start":{"line":17,"column":71,"offset":595},"end":{"line":17,"column":204,"offset":728}}},{"type":"text","value":"）","position":{"start":{"line":17,"column":204,"offset":728},"end":{"line":17,"column":205,"offset":729}}}],"position":{"start":{"line":17,"column":3,"offset":527},"end":{"line":17,"column":205,"offset":729}}},{"type":"text","value":"\n"}],"position":{"start":{"line":13,"column":3,"offset":198},"end":{"line":17,"column":205,"offset":729}}}],"position":{"start":{"line":12,"column":1,"offset":148},"end":{"line":17,"column":205,"offset":729}}},{"type":"text","value":"\n"}],"position":{"start":{"line":12,"column":1,"offset":148},"end":{"line":17,"column":205,"offset":729}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Rails new","position":{"start":{"line":19,"column":4,"offset":734},"end":{"line":19,"column":13,"offset":743}}}],"position":{"start":{"line":19,"column":1,"offset":731},"end":{"line":19,"column":13,"offset":743}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Rails projectを作るためにRailsを入れる必要がある","position":{"start":{"line":21,"column":3,"offset":747},"end":{"line":21,"column":36,"offset":780}}}],"position":{"start":{"line":21,"column":1,"offset":745},"end":{"line":21,"column":36,"offset":780}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"とりあえず ","position":{"start":{"line":22,"column":3,"offset":783},"end":{"line":22,"column":9,"offset":789}}},{"type":"element","tagName":"a","properties":{"href":"https://docs.docker.com/compose/rails/"},"children":[{"type":"text","value":"Docker compose","position":{"start":{"line":22,"column":10,"offset":790},"end":{"line":22,"column":24,"offset":804}}}],"position":{"start":{"line":22,"column":9,"offset":789},"end":{"line":22,"column":65,"offset":845}}},{"type":"text","value":" 公式の方法でプロジェクトを初期化する","position":{"start":{"line":22,"column":65,"offset":845},"end":{"line":22,"column":84,"offset":864}}}],"position":{"start":{"line":22,"column":1,"offset":781},"end":{"line":22,"column":84,"offset":864}}},{"type":"text","value":"\n"}],"position":{"start":{"line":21,"column":1,"offset":745},"end":{"line":22,"column":84,"offset":864}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Rubocopを入れる","position":{"start":{"line":24,"column":4,"offset":869},"end":{"line":24,"column":15,"offset":880}}}],"position":{"start":{"line":24,"column":1,"offset":866},"end":{"line":24,"column":15,"offset":880}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"どんなものなのか、とりあえず ","position":{"start":{"line":26,"column":3,"offset":884},"end":{"line":26,"column":18,"offset":899}}},{"type":"element","tagName":"a","properties":{"href":"https://github.com/toshimaru/rubocop-rails_config"},"children":[{"type":"text","value":"rails のものらしい","position":{"start":{"line":26,"column":19,"offset":900},"end":{"line":26,"column":31,"offset":912}}}],"position":{"start":{"line":26,"column":18,"offset":899},"end":{"line":26,"column":83,"offset":964}}},{"type":"text","value":" 設定を採用する","position":{"start":{"line":26,"column":83,"offset":964},"end":{"line":26,"column":91,"offset":972}}}],"position":{"start":{"line":26,"column":1,"offset":882},"end":{"line":26,"column":91,"offset":972}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"一部formatしてくれるし便利な様子","position":{"start":{"line":27,"column":3,"offset":975},"end":{"line":27,"column":22,"offset":994}}}],"position":{"start":{"line":27,"column":1,"offset":973},"end":{"line":27,"column":22,"offset":994}}},{"type":"text","value":"\n"}],"position":{"start":{"line":26,"column":1,"offset":882},"end":{"line":27,"column":22,"offset":994}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"現状","position":{"start":{"line":29,"column":4,"offset":999},"end":{"line":29,"column":6,"offset":1001}}}],"position":{"start":{"line":29,"column":1,"offset":996},"end":{"line":29,"column":6,"offset":1001}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"lockfileがあるけど ","position":{"start":{"line":31,"column":3,"offset":1005},"end":{"line":31,"column":17,"offset":1019}}},{"type":"element","tagName":"a","properties":{"href":"https://travis-ci.com/9renpoto/rb/builds/96012247"},"children":[{"type":"text","value":"CI 上だけ Fail","position":{"start":{"line":31,"column":18,"offset":1020},"end":{"line":31,"column":29,"offset":1031}}}],"position":{"start":{"line":31,"column":17,"offset":1019},"end":{"line":31,"column":81,"offset":1083}}},{"type":"text","value":" する。つらい","position":{"start":{"line":31,"column":81,"offset":1083},"end":{"line":31,"column":88,"offset":1090}}}],"position":{"start":{"line":31,"column":1,"offset":1003},"end":{"line":31,"column":88,"offset":1090}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"rspecは標準ではscaffordされないのか、と思った","position":{"start":{"line":32,"column":3,"offset":1093},"end":{"line":32,"column":32,"offset":1122}}}],"position":{"start":{"line":32,"column":1,"offset":1091},"end":{"line":32,"column":32,"offset":1122}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"まだcoffee-scriptっぽいものを持ってる","position":{"start":{"line":33,"column":3,"offset":1125},"end":{"line":33,"column":28,"offset":1150}}}],"position":{"start":{"line":33,"column":1,"offset":1123},"end":{"line":33,"column":28,"offset":1150}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"e2eテスト系のフレームワークにも依存して、どっしりしている","position":{"start":{"line":34,"column":3,"offset":1153},"end":{"line":34,"column":33,"offset":1183}}}],"position":{"start":{"line":34,"column":1,"offset":1151},"end":{"line":34,"column":33,"offset":1183}}},{"type":"text","value":"\n"}],"position":{"start":{"line":31,"column":1,"offset":1003},"end":{"line":34,"column":33,"offset":1183}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"とりあえず目指す着地","position":{"start":{"line":36,"column":4,"offset":1188},"end":{"line":36,"column":14,"offset":1198}}}],"position":{"start":{"line":36,"column":1,"offset":1185},"end":{"line":36,"column":14,"offset":1198}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"DB依存してテスト書く","position":{"start":{"line":38,"column":3,"offset":1202},"end":{"line":38,"column":14,"offset":1213}}}],"position":{"start":{"line":38,"column":1,"offset":1200},"end":{"line":38,"column":14,"offset":1213}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"redis依存してテスト書く","position":{"start":{"line":39,"column":3,"offset":1216},"end":{"line":39,"column":17,"offset":1230}}}],"position":{"start":{"line":39,"column":1,"offset":1214},"end":{"line":39,"column":17,"offset":1230}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"coverage report出す","position":{"start":{"line":40,"column":3,"offset":1233},"end":{"line":40,"column":20,"offset":1250}}}],"position":{"start":{"line":40,"column":1,"offset":1231},"end":{"line":40,"column":20,"offset":1250}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"噂の ","position":{"start":{"line":41,"column":3,"offset":1253},"end":{"line":41,"column":6,"offset":1256}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"webpacker"}],"position":{"start":{"line":41,"column":6,"offset":1256},"end":{"line":41,"column":17,"offset":1267}}},{"type":"text","value":" とかに依存する","position":{"start":{"line":41,"column":17,"offset":1267},"end":{"line":41,"column":25,"offset":1275}}}],"position":{"start":{"line":41,"column":1,"offset":1251},"end":{"line":41,"column":25,"offset":1275}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/airbnb/hypernova-ruby"},"children":[{"type":"text","value":"hypernova-ruby","position":{"start":{"line":42,"column":4,"offset":1279},"end":{"line":42,"column":18,"offset":1293}}}],"position":{"start":{"line":42,"column":3,"offset":1278},"end":{"line":42,"column":61,"offset":1336}}},{"type":"text","value":" とかに依存する","position":{"start":{"line":42,"column":61,"offset":1336},"end":{"line":42,"column":69,"offset":1344}}}],"position":{"start":{"line":42,"column":1,"offset":1276},"end":{"line":42,"column":69,"offset":1344}}},{"type":"text","value":"\n"}],"position":{"start":{"line":38,"column":1,"offset":1200},"end":{"line":42,"column":69,"offset":1344}}}],"data":{"quirksMode":false},"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":1,"offset":0}}},"raw":"\n# TL;DR\n\n- いろんな会社に話を聞きに行ったが、まだまだ世界はRails\n- そうだRailsを学ぼう\n- とりあえず数時間だけ作った、 getting startedを進めていきたい\n\n<https://github.com/9renpoto/rb>\n\n## Rubyを手に入れる\n\n- `brew install ruby` で雑に使っていたわけだが流石にバージョンを固定する\n  - 過去はrbenvを使っていたけれど [using asdf instend](https://github.com/daenney/rbenv) らしいので別で検討する\n    - [omf/plugin-rbenv](https://github.com/oh-my-fish/plugin-rbenv) でも良かったけれど更新されてない\n  - とりあえずメンテされてそうな [rstacruz/fish-asdf](https://github.com/rstacruz/fish-asdf) を入れる\n  - `asdf` そのものは `brew` で入れて、かつ `/usr/local/bin` を使っていないためイマイチ動きが合わない\n  - [`asdf` 公式](https://github.com/asdf-vm/asdf#setup) の方法でactivateする（[refs](https://github.com/9renpoto/dotfiles/commit/ac00ecbeda4c16a3e741ab14158aad682241c1ce#diff-66758e6f92b7dd7008c34229fe0c9fe1R14)）\n\n## Rails new\n\n- Rails projectを作るためにRailsを入れる必要がある\n- とりあえず [Docker compose](https://docs.docker.com/compose/rails/) 公式の方法でプロジェクトを初期化する\n\n## Rubocopを入れる\n\n- どんなものなのか、とりあえず [rails のものらしい](https://github.com/toshimaru/rubocop-rails_config) 設定を採用する\n- 一部formatしてくれるし便利な様子\n\n## 現状\n\n- lockfileがあるけど [CI 上だけ Fail](https://travis-ci.com/9renpoto/rb/builds/96012247) する。つらい\n- rspecは標準ではscaffordされないのか、と思った\n- まだcoffee-scriptっぽいものを持ってる\n- e2eテスト系のフレームワークにも依存して、どっしりしている\n\n## とりあえず目指す着地\n\n- DB依存してテスト書く\n- redis依存してテスト書く\n- coverage report出す\n- 噂の `webpacker` とかに依存する\n- [hypernova-ruby](https://github.com/airbnb/hypernova-ruby) とかに依存する\n"}