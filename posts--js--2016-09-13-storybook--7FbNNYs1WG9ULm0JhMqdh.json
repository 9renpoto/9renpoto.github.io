{"data":{"date":"2016-09-13T12:38:08.000Z","permalink":"/entry/2016/09/13/storybook/","title":"storybook を TypeScript で動かす","categories":["javascript","react","typescript"],"_entry":"posts/js/2016-09-13-storybook.md","page":"post","name":"storybook","category":"js","url":"/entry/2016/09/13/storybook/"},"content":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"React Storybookを試す","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":21,"offset":21}}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":21,"offset":21}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"TL;DR","position":{"start":{"line":4,"column":4,"offset":26},"end":{"line":4,"column":9,"offset":31}}}],"position":{"start":{"line":4,"column":1,"offset":23},"end":{"line":4,"column":9,"offset":31}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"react-storybookはcomponentのstyleguide","position":{"start":{"line":6,"column":3,"offset":35},"end":{"line":6,"column":39,"offset":71}}}],"position":{"start":{"line":6,"column":1,"offset":33},"end":{"line":6,"column":39,"offset":71}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"TypeScriptのままでは動かせないので一度ビルドする（2016/09現在）","position":{"start":{"line":7,"column":3,"offset":74},"end":{"line":7,"column":43,"offset":114}}}],"position":{"start":{"line":7,"column":1,"offset":72},"end":{"line":7,"column":43,"offset":114}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"addon拡張で開発が便利になるエコシステムはある","position":{"start":{"line":8,"column":3,"offset":117},"end":{"line":8,"column":28,"offset":142}}}],"position":{"start":{"line":8,"column":1,"offset":115},"end":{"line":8,"column":28,"offset":142}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"途中経過","position":{"start":{"line":9,"column":3,"offset":145},"end":{"line":9,"column":7,"offset":149}}}],"position":{"start":{"line":9,"column":3,"offset":145},"end":{"line":9,"column":7,"offset":149}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/9renpoto/style/tree/aab6f82ccb228a6b56a18223f6f66bf0f3bd78b1"},"children":[{"type":"text","value":"9renpoto/style","position":{"start":{"line":10,"column":6,"offset":155},"end":{"line":10,"column":20,"offset":169}}}],"position":{"start":{"line":10,"column":5,"offset":154},"end":{"line":10,"column":102,"offset":251}}}],"position":{"start":{"line":10,"column":3,"offset":152},"end":{"line":10,"column":102,"offset":251}}},{"type":"text","value":"\n"}],"position":{"start":{"line":10,"column":3,"offset":152},"end":{"line":10,"column":102,"offset":251}}},{"type":"text","value":"\n"}],"position":{"start":{"line":9,"column":1,"offset":143},"end":{"line":10,"column":102,"offset":251}}},{"type":"text","value":"\n"}],"position":{"start":{"line":6,"column":1,"offset":33},"end":{"line":10,"column":102,"offset":251}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"storybook","position":{"start":{"line":12,"column":4,"offset":256},"end":{"line":12,"column":13,"offset":265}}}],"position":{"start":{"line":12,"column":1,"offset":253},"end":{"line":12,"column":13,"offset":265}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"stories"}],"position":{"start":{"line":14,"column":3,"offset":269},"end":{"line":14,"column":12,"offset":278}}}],"position":{"start":{"line":14,"column":3,"offset":269},"end":{"line":14,"column":12,"offset":278}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"add"}],"position":{"start":{"line":15,"column":5,"offset":283},"end":{"line":15,"column":10,"offset":288}}},{"type":"text","value":" して一覧ページがカジュアルに作成できる","position":{"start":{"line":15,"column":10,"offset":288},"end":{"line":15,"column":30,"offset":308}}}],"position":{"start":{"line":15,"column":3,"offset":281},"end":{"line":15,"column":30,"offset":308}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"gh-pages"}],"position":{"start":{"line":16,"column":5,"offset":313},"end":{"line":16,"column":15,"offset":323}}},{"type":"text","value":" などで簡単にホストできる","position":{"start":{"line":16,"column":15,"offset":323},"end":{"line":16,"column":28,"offset":336}}}],"position":{"start":{"line":16,"column":3,"offset":311},"end":{"line":16,"column":28,"offset":336}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"HMR"}],"position":{"start":{"line":17,"column":5,"offset":341},"end":{"line":17,"column":10,"offset":346}}},{"type":"text","value":" ができるのはありがたい","position":{"start":{"line":17,"column":10,"offset":346},"end":{"line":17,"column":22,"offset":358}}}],"position":{"start":{"line":17,"column":5,"offset":341},"end":{"line":17,"column":22,"offset":358}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"いろいろwatchしたくなる","position":{"start":{"line":18,"column":7,"offset":365},"end":{"line":18,"column":21,"offset":379}}}],"position":{"start":{"line":18,"column":5,"offset":363},"end":{"line":18,"column":21,"offset":379}}},{"type":"text","value":"\n"}],"position":{"start":{"line":18,"column":5,"offset":363},"end":{"line":18,"column":21,"offset":379}}},{"type":"text","value":"\n"}],"position":{"start":{"line":17,"column":3,"offset":339},"end":{"line":18,"column":21,"offset":379}}},{"type":"text","value":"\n"}],"position":{"start":{"line":15,"column":3,"offset":281},"end":{"line":18,"column":21,"offset":379}}},{"type":"text","value":"\n"}],"position":{"start":{"line":14,"column":1,"offset":267},"end":{"line":18,"column":21,"offset":379}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"webpack"}],"position":{"start":{"line":19,"column":3,"offset":382},"end":{"line":19,"column":12,"offset":391}}},{"type":"text","value":" にどっぷり依存","position":{"start":{"line":19,"column":12,"offset":391},"end":{"line":19,"column":20,"offset":399}}}],"position":{"start":{"line":19,"column":1,"offset":380},"end":{"line":19,"column":20,"offset":399}}},{"type":"text","value":"\n"}],"position":{"start":{"line":14,"column":1,"offset":267},"end":{"line":19,"column":20,"offset":399}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"TypeScript with React","position":{"start":{"line":21,"column":4,"offset":404},"end":{"line":21,"column":25,"offset":425}}}],"position":{"start":{"line":21,"column":1,"offset":401},"end":{"line":21,"column":25,"offset":425}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://gfx.hatenablog.com/entry/2016/09/12/162055"},"children":[{"type":"text","value":"2016 年 9 月現在だと React アプリの TypeScript 採用は時期尚早","position":{"start":{"line":23,"column":4,"offset":430},"end":{"line":23,"column":48,"offset":474}}}],"position":{"start":{"line":23,"column":3,"offset":429},"end":{"line":23,"column":101,"offset":527}}}],"position":{"start":{"line":23,"column":3,"offset":429},"end":{"line":23,"column":101,"offset":527}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"確かに現状の型定義は古い","position":{"start":{"line":24,"column":5,"offset":532},"end":{"line":24,"column":17,"offset":544}}}],"position":{"start":{"line":24,"column":3,"offset":530},"end":{"line":24,"column":17,"offset":544}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"まだそこで困るほどReact使いこなせていない","position":{"start":{"line":25,"column":5,"offset":549},"end":{"line":25,"column":28,"offset":572}}}],"position":{"start":{"line":25,"column":3,"offset":547},"end":{"line":25,"column":28,"offset":572}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"緩く型を信じる・困ったら考える（個人では）","position":{"start":{"line":26,"column":5,"offset":577},"end":{"line":26,"column":26,"offset":598}}}],"position":{"start":{"line":26,"column":3,"offset":575},"end":{"line":26,"column":26,"offset":598}}},{"type":"text","value":"\n"}],"position":{"start":{"line":24,"column":3,"offset":530},"end":{"line":26,"column":26,"offset":598}}},{"type":"text","value":"\n"}],"position":{"start":{"line":23,"column":1,"offset":427},"end":{"line":26,"column":26,"offset":598}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"tsx"}],"position":{"start":{"line":27,"column":3,"offset":601},"end":{"line":27,"column":8,"offset":606}}}],"position":{"start":{"line":27,"column":3,"offset":601},"end":{"line":27,"column":8,"offset":606}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"サポートありがたい","position":{"start":{"line":28,"column":5,"offset":611},"end":{"line":28,"column":14,"offset":620}}}],"position":{"start":{"line":28,"column":3,"offset":609},"end":{"line":28,"column":14,"offset":620}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"DOMを型付きで定義できることの安心感","position":{"start":{"line":29,"column":5,"offset":625},"end":{"line":29,"column":24,"offset":644}}}],"position":{"start":{"line":29,"column":5,"offset":625},"end":{"line":29,"column":24,"offset":644}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"テストを書くのは意識高めになる必要がある","position":{"start":{"line":30,"column":7,"offset":651},"end":{"line":30,"column":27,"offset":671}}}],"position":{"start":{"line":30,"column":5,"offset":649},"end":{"line":30,"column":27,"offset":671}}},{"type":"text","value":"\n"}],"position":{"start":{"line":30,"column":5,"offset":649},"end":{"line":30,"column":27,"offset":671}}},{"type":"text","value":"\n"}],"position":{"start":{"line":29,"column":3,"offset":623},"end":{"line":30,"column":27,"offset":671}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"便利だけど遅い","position":{"start":{"line":31,"column":5,"offset":676},"end":{"line":31,"column":12,"offset":683}}}],"position":{"start":{"line":31,"column":3,"offset":674},"end":{"line":31,"column":12,"offset":683}}},{"type":"text","value":"\n"}],"position":{"start":{"line":28,"column":3,"offset":609},"end":{"line":31,"column":12,"offset":683}}},{"type":"text","value":"\n"}],"position":{"start":{"line":27,"column":1,"offset":599},"end":{"line":31,"column":12,"offset":683}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"webpack"}],"position":{"start":{"line":32,"column":3,"offset":686},"end":{"line":32,"column":12,"offset":695}}}],"position":{"start":{"line":32,"column":3,"offset":686},"end":{"line":32,"column":12,"offset":695}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"古いloaderが増えてきたex. ","position":{"start":{"line":33,"column":5,"offset":700},"end":{"line":33,"column":23,"offset":718}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"ts-loader"}],"position":{"start":{"line":33,"column":23,"offset":718},"end":{"line":33,"column":34,"offset":729}}}],"position":{"start":{"line":33,"column":3,"offset":698},"end":{"line":33,"column":34,"offset":729}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"ts-loader"}],"position":{"start":{"line":34,"column":5,"offset":734},"end":{"line":34,"column":16,"offset":745}}},{"type":"text","value":" などでwatchはできないので ","position":{"start":{"line":34,"column":16,"offset":745},"end":{"line":34,"column":33,"offset":762}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"tsc -w"}],"position":{"start":{"line":34,"column":33,"offset":762},"end":{"line":34,"column":41,"offset":770}}},{"type":"text","value":" で様子を見る","position":{"start":{"line":34,"column":41,"offset":770},"end":{"line":34,"column":48,"offset":777}}}],"position":{"start":{"line":34,"column":3,"offset":732},"end":{"line":34,"column":48,"offset":777}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"ガッツリ依存せず疎結合にできるところは疎結合にする","position":{"start":{"line":35,"column":5,"offset":782},"end":{"line":35,"column":30,"offset":807}}}],"position":{"start":{"line":35,"column":3,"offset":780},"end":{"line":35,"column":30,"offset":807}}},{"type":"text","value":"\n"}],"position":{"start":{"line":33,"column":3,"offset":698},"end":{"line":35,"column":30,"offset":807}}},{"type":"text","value":"\n"}],"position":{"start":{"line":32,"column":1,"offset":684},"end":{"line":35,"column":30,"offset":807}}},{"type":"text","value":"\n"}],"position":{"start":{"line":23,"column":1,"offset":427},"end":{"line":35,"column":30,"offset":807}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"CSS-module","position":{"start":{"line":37,"column":4,"offset":812},"end":{"line":37,"column":14,"offset":822}}}],"position":{"start":{"line":37,"column":1,"offset":809},"end":{"line":37,"column":14,"offset":822}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"基本的に使わない方が良さそう","position":{"start":{"line":39,"column":3,"offset":826},"end":{"line":39,"column":17,"offset":840}}}],"position":{"start":{"line":39,"column":1,"offset":824},"end":{"line":39,"column":17,"offset":840}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"使う場合は構造化cssとして育てるのではなく、 ","position":{"start":{"line":40,"column":3,"offset":843},"end":{"line":40,"column":27,"offset":867}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"local"}],"position":{"start":{"line":40,"column":27,"offset":867},"end":{"line":40,"column":34,"offset":874}}},{"type":"text","value":" cssとしてビルドしたほうが良さそう","position":{"start":{"line":40,"column":34,"offset":874},"end":{"line":40,"column":53,"offset":893}}}],"position":{"start":{"line":40,"column":3,"offset":843},"end":{"line":40,"column":53,"offset":893}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"SDKなどで利用するのはアリ","position":{"start":{"line":41,"column":5,"offset":898},"end":{"line":41,"column":19,"offset":912}}}],"position":{"start":{"line":41,"column":3,"offset":896},"end":{"line":41,"column":19,"offset":912}}},{"type":"text","value":"\n"}],"position":{"start":{"line":41,"column":3,"offset":896},"end":{"line":41,"column":19,"offset":912}}},{"type":"text","value":"\n"}],"position":{"start":{"line":40,"column":1,"offset":841},"end":{"line":41,"column":19,"offset":912}}},{"type":"text","value":"\n"}],"position":{"start":{"line":39,"column":1,"offset":824},"end":{"line":41,"column":19,"offset":912}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Refs","position":{"start":{"line":43,"column":4,"offset":917},"end":{"line":43,"column":8,"offset":921}}}],"position":{"start":{"line":43,"column":1,"offset":914},"end":{"line":43,"column":8,"offset":921}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"http://developer.hatenastaff.com/entry/2016/04/14/150000"},"children":[{"type":"text","value":"react-storybook を用いた React コンポーネント開発","position":{"start":{"line":45,"column":2,"offset":924},"end":{"line":45,"column":38,"offset":960}}}],"position":{"start":{"line":45,"column":1,"offset":923},"end":{"line":45,"column":97,"offset":1019}}}],"position":{"start":{"line":45,"column":1,"offset":923},"end":{"line":45,"column":97,"offset":1019}}}],"data":{"quirksMode":false},"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":1,"offset":0}}},"raw":"\n# React Storybookを試す\n\n## TL;DR\n\n* react-storybookはcomponentのstyleguide\n* TypeScriptのままでは動かせないので一度ビルドする（2016/09現在）\n* addon拡張で開発が便利になるエコシステムはある\n* 途中経過\n  * [9renpoto/style](https://github.com/9renpoto/style/tree/aab6f82ccb228a6b56a18223f6f66bf0f3bd78b1)\n\n## storybook\n\n* `stories`\n  * `add` して一覧ページがカジュアルに作成できる\n  * `gh-pages` などで簡単にホストできる\n  * `HMR` ができるのはありがたい\n    * いろいろwatchしたくなる\n* `webpack` にどっぷり依存\n\n## TypeScript with React\n\n* [2016 年 9 月現在だと React アプリの TypeScript 採用は時期尚早](https://gfx.hatenablog.com/entry/2016/09/12/162055)\n  * 確かに現状の型定義は古い\n  * まだそこで困るほどReact使いこなせていない\n  * 緩く型を信じる・困ったら考える（個人では）\n* `tsx`\n  * サポートありがたい\n  * DOMを型付きで定義できることの安心感\n    * テストを書くのは意識高めになる必要がある\n  * 便利だけど遅い\n* `webpack`\n  * 古いloaderが増えてきたex. `ts-loader`\n  * `ts-loader` などでwatchはできないので `tsc -w` で様子を見る\n  * ガッツリ依存せず疎結合にできるところは疎結合にする\n\n## CSS-module\n\n* 基本的に使わない方が良さそう\n* 使う場合は構造化cssとして育てるのではなく、 `local` cssとしてビルドしたほうが良さそう\n  * SDKなどで利用するのはアリ\n\n## Refs\n\n[react-storybook を用いた React コンポーネント開発](http://developer.hatenastaff.com/entry/2016/04/14/150000)\n"}