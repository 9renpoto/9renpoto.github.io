{"data":{"date":"2017-05-14T13:39:17.000Z","permalink":"/entry/2017/05/14/slack-channel-active-reminder/","title":"アクティブでなさそうなSlackチャンネルをArchiveお願いする","categories":["slack","javascript"],"_entry":"posts/2017-05-14-slack-channel-active-reminder/index.md","page":"post","name":"index","category":"2017-05-14-slack-channel-active-reminder","url":"/entry/2017/05/14/slack-channel-active-reminder/"},"content":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"slack-channel-active-reminder","position":{"start":{"line":1,"column":3,"offset":2},"end":{"line":1,"column":32,"offset":31}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":32,"offset":31}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"書いたもの： ","position":{"start":{"line":3,"column":1,"offset":33},"end":{"line":3,"column":8,"offset":40}}},{"type":"element","tagName":"a","properties":{"href":"https://github.com/9renpoto/slack-channel-active-reminder"},"children":[{"type":"text","value":"https://github.com/9renpoto/slack-channel-active-reminder","position":{"start":{"line":3,"column":9,"offset":41},"end":{"line":3,"column":66,"offset":98}}}],"position":{"start":{"line":3,"column":8,"offset":40},"end":{"line":3,"column":67,"offset":99}}}],"position":{"start":{"line":3,"column":1,"offset":33},"end":{"line":3,"column":67,"offset":99}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"./slack-channel-active-reminder.png","alt":"image"},"children":[],"position":{"start":{"line":5,"column":1,"offset":101},"end":{"line":5,"column":46,"offset":146}}}],"position":{"start":{"line":5,"column":1,"offset":101},"end":{"line":5,"column":46,"offset":146}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"slackの部屋は便利に増やしていけますが、\n同じような部屋が散乱したり、入ってみたものの活動が薄かったり様々あるので\n一定時間発言がない部屋に対してメッセージを送りつけるようなものを書いた。","position":{"start":{"line":7,"column":1,"offset":148},"end":{"line":9,"column":37,"offset":244}}}],"position":{"start":{"line":7,"column":1,"offset":148},"end":{"line":9,"column":37,"offset":244}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Usage","position":{"start":{"line":11,"column":4,"offset":249},"end":{"line":11,"column":9,"offset":254}}}],"position":{"start":{"line":11,"column":1,"offset":246},"end":{"line":11,"column":9,"offset":254}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Cronなどと合わせて仕込んで良いタイミングで発言がなさそうなところに対してメッセージを送る。","position":{"start":{"line":13,"column":1,"offset":256},"end":{"line":13,"column":48,"offset":303}}}],"position":{"start":{"line":13,"column":1,"offset":256},"end":{"line":13,"column":48,"offset":303}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-javascript"]},"children":[{"type":"text","value":"const CronJob = require('cron').CronJob\nconst Reminder = require('slack-channel-active-reminder').default\n\nconst reminder = new Reminder()\n\nconst job = new CronJob({\n  cronTime: '0 00 18 * * 1-5',\n  onTick: function () {\n    reminder.postRemindMessage()\n  },\n  start: false,\n  timeZone: 'Asia/Tokyo'\n})\njob.start()\n"}],"position":{"start":{"line":15,"column":1,"offset":305},"end":{"line":30,"column":4,"offset":637}}}],"position":{"start":{"line":15,"column":1,"offset":305},"end":{"line":30,"column":4,"offset":637}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"中身は ","position":{"start":{"line":32,"column":1,"offset":639},"end":{"line":32,"column":5,"offset":643}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"@slack/client"}],"position":{"start":{"line":32,"column":5,"offset":643},"end":{"line":32,"column":20,"offset":658}}},{"type":"text","value":" を使っているだけ。\n便利なAPIが多いと助かる。","position":{"start":{"line":32,"column":20,"offset":658},"end":{"line":33,"column":15,"offset":683}}}],"position":{"start":{"line":32,"column":1,"offset":639},"end":{"line":33,"column":15,"offset":683}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"追記","position":{"start":{"line":35,"column":4,"offset":688},"end":{"line":35,"column":6,"offset":690}}}],"position":{"start":{"line":35,"column":1,"offset":685},"end":{"line":35,"column":6,"offset":690}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/9renpoto/slack-channel-active-reminder/pull/9"},"children":[{"type":"text","value":"https://github.com/9renpoto/slack-channel-active-reminder/pull/9","position":{"start":{"line":37,"column":2,"offset":693},"end":{"line":37,"column":66,"offset":757}}}],"position":{"start":{"line":37,"column":1,"offset":692},"end":{"line":37,"column":67,"offset":758}}}],"position":{"start":{"line":37,"column":1,"offset":692},"end":{"line":37,"column":67,"offset":758}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"flow gen-flow-files"}],"position":{"start":{"line":39,"column":1,"offset":760},"end":{"line":39,"column":22,"offset":781}}},{"type":"text","value":" が良いものをだしてくれないため外す。\n早く1.0が待ち遠しい。","position":{"start":{"line":39,"column":22,"offset":781},"end":{"line":40,"column":13,"offset":813}}}],"position":{"start":{"line":39,"column":1,"offset":760},"end":{"line":40,"column":13,"offset":813}}}],"data":{"quirksMode":false},"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":1,"offset":0}}},"raw":"# slack-channel-active-reminder\n\n書いたもの： <https://github.com/9renpoto/slack-channel-active-reminder>\n\n![image](./slack-channel-active-reminder.png)\n\nslackの部屋は便利に増やしていけますが、\n同じような部屋が散乱したり、入ってみたものの活動が薄かったり様々あるので\n一定時間発言がない部屋に対してメッセージを送りつけるようなものを書いた。\n\n## Usage\n\nCronなどと合わせて仕込んで良いタイミングで発言がなさそうなところに対してメッセージを送る。\n\n```javascript\nconst CronJob = require('cron').CronJob\nconst Reminder = require('slack-channel-active-reminder').default\n\nconst reminder = new Reminder()\n\nconst job = new CronJob({\n  cronTime: '0 00 18 * * 1-5',\n  onTick: function () {\n    reminder.postRemindMessage()\n  },\n  start: false,\n  timeZone: 'Asia/Tokyo'\n})\njob.start()\n```\n\n中身は `@slack/client` を使っているだけ。\n便利なAPIが多いと助かる。\n\n## 追記\n\n<https://github.com/9renpoto/slack-channel-active-reminder/pull/9>\n\n`flow gen-flow-files` が良いものをだしてくれないため外す。\n早く1.0が待ち遠しい。\n"}