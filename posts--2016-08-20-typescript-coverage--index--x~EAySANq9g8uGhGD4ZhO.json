{"data":{"date":"2016-08-20T05:28:25.000Z","permalink":"/entry/2016/08/20/typescript-coverage/","title":"TypeScript で coverage を計測する","categories":["typescript","javascript"],"_entry":"posts/2016-08-20-typescript-coverage/index.md","page":"post","name":"index","category":"2016-08-20-typescript-coverage","url":"/entry/2016/08/20/typescript-coverage/"},"content":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"TypeScriptでCoverage reportを計測する","position":{"start":{"line":1,"column":3,"offset":2},"end":{"line":1,"column":34,"offset":33}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":34,"offset":33}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"TL;DR","position":{"start":{"line":3,"column":4,"offset":38},"end":{"line":3,"column":9,"offset":43}}}],"position":{"start":{"line":3,"column":1,"offset":35},"end":{"line":3,"column":9,"offset":43}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://www.npmjs.com/package/remap-istanbul"},"children":[{"type":"text","value":"remap-istanbul","position":{"start":{"line":5,"column":4,"offset":48},"end":{"line":5,"column":18,"offset":62}}}],"position":{"start":{"line":5,"column":3,"offset":47},"end":{"line":5,"column":65,"offset":109}}},{"type":"text","value":" を使う","position":{"start":{"line":5,"column":65,"offset":109},"end":{"line":5,"column":69,"offset":113}}}],"position":{"start":{"line":5,"column":1,"offset":45},"end":{"line":5,"column":69,"offset":113}}},{"type":"text","value":"\n"}],"position":{"start":{"line":5,"column":1,"offset":45},"end":{"line":5,"column":69,"offset":113}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Usage","position":{"start":{"line":7,"column":4,"offset":118},"end":{"line":7,"column":9,"offset":123}}}],"position":{"start":{"line":7,"column":1,"offset":115},"end":{"line":7,"column":9,"offset":123}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"npm install remap-istanbul"}],"position":{"start":{"line":9,"column":3,"offset":127},"end":{"line":9,"column":31,"offset":155}}}],"position":{"start":{"line":9,"column":1,"offset":125},"end":{"line":9,"column":31,"offset":155}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"sourcemap: true"}],"position":{"start":{"line":10,"column":3,"offset":158},"end":{"line":10,"column":20,"offset":175}}}],"position":{"start":{"line":10,"column":1,"offset":156},"end":{"line":10,"column":20,"offset":175}}},{"type":"text","value":"\n"}],"position":{"start":{"line":9,"column":1,"offset":125},"end":{"line":10,"column":20,"offset":175}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Memo","position":{"start":{"line":12,"column":4,"offset":180},"end":{"line":12,"column":8,"offset":184}}}],"position":{"start":{"line":12,"column":1,"offset":177},"end":{"line":12,"column":8,"offset":184}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"tsc"}],"position":{"start":{"line":14,"column":3,"offset":188},"end":{"line":14,"column":8,"offset":193}}},{"type":"text","value":" > ","position":{"start":{"line":14,"column":8,"offset":193},"end":{"line":14,"column":11,"offset":196}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"npm test"}],"position":{"start":{"line":14,"column":11,"offset":196},"end":{"line":14,"column":21,"offset":206}}},{"type":"text","value":" という流れになったためJavaScriptとしてテストをする形になる","position":{"start":{"line":14,"column":21,"offset":206},"end":{"line":14,"column":56,"offset":241}}}],"position":{"start":{"line":14,"column":1,"offset":186},"end":{"line":14,"column":56,"offset":241}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://www.npmjs.com/package/espower-typescript"},"children":[{"type":"text","value":"espower-typescript","position":{"start":{"line":15,"column":4,"offset":245},"end":{"line":15,"column":22,"offset":263}}}],"position":{"start":{"line":15,"column":3,"offset":244},"end":{"line":15,"column":73,"offset":314}}},{"type":"text","value":" を使わないようになる","position":{"start":{"line":15,"column":73,"offset":314},"end":{"line":15,"column":84,"offset":325}}}],"position":{"start":{"line":15,"column":3,"offset":244},"end":{"line":15,"column":84,"offset":325}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"espower-typescript"}],"position":{"start":{"line":16,"column":5,"offset":330},"end":{"line":16,"column":25,"offset":350}}},{"type":"text","value":" はtscのwrapperなのでtscする場合は使えなそう","position":{"start":{"line":16,"column":25,"offset":350},"end":{"line":16,"column":54,"offset":379}}}],"position":{"start":{"line":16,"column":3,"offset":328},"end":{"line":16,"column":54,"offset":379}}},{"type":"text","value":"\n"}],"position":{"start":{"line":16,"column":3,"offset":328},"end":{"line":16,"column":54,"offset":379}}},{"type":"text","value":"\n"}],"position":{"start":{"line":15,"column":1,"offset":242},"end":{"line":16,"column":54,"offset":379}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"power-assert"}],"position":{"start":{"line":17,"column":3,"offset":382},"end":{"line":17,"column":17,"offset":396}}},{"type":"text","value":" が上手く構造を解釈してくれてなさそう","position":{"start":{"line":17,"column":17,"offset":396},"end":{"line":17,"column":36,"offset":415}}}],"position":{"start":{"line":17,"column":3,"offset":382},"end":{"line":17,"column":36,"offset":415}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"espower-typescript"}],"position":{"start":{"line":18,"column":5,"offset":420},"end":{"line":18,"column":25,"offset":440}}},{"type":"text","value":" が担っていた役割を別で与える必要がある","position":{"start":{"line":18,"column":25,"offset":440},"end":{"line":18,"column":45,"offset":460}}}],"position":{"start":{"line":18,"column":3,"offset":418},"end":{"line":18,"column":45,"offset":460}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"TypeScriptに依存するなら無駄にbabel pluginなどは使いたくない","position":{"start":{"line":19,"column":5,"offset":465},"end":{"line":19,"column":46,"offset":506}}}],"position":{"start":{"line":19,"column":5,"offset":465},"end":{"line":19,"column":46,"offset":506}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"TODO考える","position":{"start":{"line":20,"column":7,"offset":513},"end":{"line":20,"column":14,"offset":520}}}],"position":{"start":{"line":20,"column":5,"offset":511},"end":{"line":20,"column":14,"offset":520}}},{"type":"text","value":"\n"}],"position":{"start":{"line":20,"column":5,"offset":511},"end":{"line":20,"column":14,"offset":520}}},{"type":"text","value":"\n"}],"position":{"start":{"line":19,"column":3,"offset":463},"end":{"line":20,"column":14,"offset":520}}},{"type":"text","value":"\n"}],"position":{"start":{"line":18,"column":3,"offset":418},"end":{"line":20,"column":14,"offset":520}}},{"type":"text","value":"\n"}],"position":{"start":{"line":17,"column":1,"offset":380},"end":{"line":20,"column":14,"offset":520}}},{"type":"text","value":"\n"}],"position":{"start":{"line":14,"column":1,"offset":186},"end":{"line":20,"column":14,"offset":520}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Refs","position":{"start":{"line":22,"column":4,"offset":525},"end":{"line":22,"column":8,"offset":529}}}],"position":{"start":{"line":22,"column":1,"offset":522},"end":{"line":22,"column":8,"offset":529}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"http://blog.syati.info/post/typescript_coverage/"},"children":[{"type":"text","value":"http://blog.syati.info/post/typescript_coverage/","position":{"start":{"line":24,"column":4,"offset":534},"end":{"line":24,"column":52,"offset":582}}}],"position":{"start":{"line":24,"column":3,"offset":533},"end":{"line":24,"column":53,"offset":583}}}],"position":{"start":{"line":24,"column":1,"offset":531},"end":{"line":24,"column":53,"offset":583}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/9renpoto/ts/pull/34"},"children":[{"type":"text","value":"https://github.com/9renpoto/ts/pull/34","position":{"start":{"line":25,"column":4,"offset":587},"end":{"line":25,"column":42,"offset":625}}}],"position":{"start":{"line":25,"column":3,"offset":586},"end":{"line":25,"column":43,"offset":626}}}],"position":{"start":{"line":25,"column":1,"offset":584},"end":{"line":25,"column":43,"offset":626}}},{"type":"text","value":"\n"}],"position":{"start":{"line":24,"column":1,"offset":531},"end":{"line":25,"column":43,"offset":626}}}],"data":{"quirksMode":false},"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":1,"offset":0}}},"raw":"# TypeScriptでCoverage reportを計測する\n\n## TL;DR\n\n- [remap-istanbul](https://www.npmjs.com/package/remap-istanbul) を使う\n\n## Usage\n\n- `npm install remap-istanbul`\n- `sourcemap: true`\n\n## Memo\n\n- `tsc` > `npm test` という流れになったためJavaScriptとしてテストをする形になる\n- [espower-typescript](https://www.npmjs.com/package/espower-typescript) を使わないようになる\n  - `espower-typescript` はtscのwrapperなのでtscする場合は使えなそう\n- `power-assert` が上手く構造を解釈してくれてなさそう\n  - `espower-typescript` が担っていた役割を別で与える必要がある\n  - TypeScriptに依存するなら無駄にbabel pluginなどは使いたくない\n    - TODO考える\n\n## Refs\n\n- <http://blog.syati.info/post/typescript_coverage/>\n- <https://github.com/9renpoto/ts/pull/34>\n"}