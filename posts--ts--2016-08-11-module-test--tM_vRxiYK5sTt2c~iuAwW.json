{"data":{"date":"2016-08-11T12:43:32.000Z","permalink":"/entry/2016/08/11/module-test/","title":"TypeScript with power-assert","category":"js","_entry":"posts/ts/2016-08-11-module-test.md","page":"post","name":"module-test","url":"/entry/2016/08/11/module-test/"},"content":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"TypeScriptでpower-assertを使いたい","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":31,"offset":31}}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":31,"offset":31}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://9renpoto.github.io/entry/2016/06/23/typescript-module-test/"},"children":[{"type":"text","value":"TypeScript テストについて","position":{"start":{"line":4,"column":2,"offset":34},"end":{"line":4,"column":20,"offset":52}}}],"position":{"start":{"line":4,"column":1,"offset":33},"end":{"line":4,"column":90,"offset":122}}},{"type":"text","value":" 少し調べました。","position":{"start":{"line":4,"column":90,"offset":122},"end":{"line":4,"column":99,"offset":131}}}],"position":{"start":{"line":4,"column":1,"offset":33},"end":{"line":4,"column":99,"offset":131}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/9renpoto/ts/pull/31"},"children":[{"type":"text","value":"https://github.com/9renpoto/ts/pull/31","position":{"start":{"line":6,"column":4,"offset":136},"end":{"line":6,"column":42,"offset":174}}}],"position":{"start":{"line":6,"column":3,"offset":135},"end":{"line":6,"column":43,"offset":175}}}],"position":{"start":{"line":6,"column":1,"offset":133},"end":{"line":6,"column":43,"offset":175}}},{"type":"text","value":"\n"}],"position":{"start":{"line":6,"column":1,"offset":133},"end":{"line":6,"column":43,"offset":175}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"原因","position":{"start":{"line":8,"column":4,"offset":180},"end":{"line":8,"column":6,"offset":182}}}],"position":{"start":{"line":8,"column":1,"offset":177},"end":{"line":8,"column":6,"offset":182}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"TypeScriptがファイルパスを相対パスか絶対パスのどちらかで返す場合がある","position":{"start":{"line":10,"column":3,"offset":186},"end":{"line":10,"column":43,"offset":226}}}],"position":{"start":{"line":10,"column":3,"offset":186},"end":{"line":10,"column":43,"offset":226}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/Microsoft/TypeScript/blob/204f2c16c0d6ff851e4798c03a9646b625ac2bd7/src/compiler/core.ts#L821-L825"},"children":[{"type":"text","value":"https://github.com/Microsoft/TypeScript/blob/204f2c16c0d6ff851e4798c03a9646b625ac2bd7/src/compiler/core.ts#L821-L825","position":{"start":{"line":11,"column":6,"offset":232},"end":{"line":11,"column":122,"offset":348}}}],"position":{"start":{"line":11,"column":5,"offset":231},"end":{"line":11,"column":123,"offset":349}}}],"position":{"start":{"line":11,"column":3,"offset":229},"end":{"line":11,"column":123,"offset":349}}},{"type":"text","value":"\n"}],"position":{"start":{"line":11,"column":3,"offset":229},"end":{"line":11,"column":123,"offset":349}}},{"type":"text","value":"\n"}],"position":{"start":{"line":10,"column":1,"offset":184},"end":{"line":11,"column":123,"offset":349}}},{"type":"text","value":"\n"}],"position":{"start":{"line":10,"column":1,"offset":184},"end":{"line":11,"column":123,"offset":349}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"対策","position":{"start":{"line":13,"column":4,"offset":354},"end":{"line":13,"column":6,"offset":356}}}],"position":{"start":{"line":13,"column":1,"offset":351},"end":{"line":13,"column":6,"offset":356}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/teppeis/typescript-simple/pull/47"},"children":[{"type":"text","value":"https://github.com/teppeis/typescript-simple/pull/47","position":{"start":{"line":15,"column":4,"offset":361},"end":{"line":15,"column":56,"offset":413}}}],"position":{"start":{"line":15,"column":3,"offset":360},"end":{"line":15,"column":57,"offset":414}}}],"position":{"start":{"line":15,"column":1,"offset":358},"end":{"line":15,"column":57,"offset":414}}},{"type":"text","value":"\n"}],"position":{"start":{"line":15,"column":1,"offset":358},"end":{"line":15,"column":57,"offset":414}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"悩み","position":{"start":{"line":17,"column":4,"offset":419},"end":{"line":17,"column":6,"offset":421}}}],"position":{"start":{"line":17,"column":1,"offset":416},"end":{"line":17,"column":6,"offset":421}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"rootDir"}],"position":{"start":{"line":19,"column":3,"offset":425},"end":{"line":19,"column":12,"offset":434}}},{"type":"text","value":", ","position":{"start":{"line":19,"column":12,"offset":434},"end":{"line":19,"column":14,"offset":436}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"outDir"}],"position":{"start":{"line":19,"column":14,"offset":436},"end":{"line":19,"column":22,"offset":444}}},{"type":"text","value":" の組み合わせで挙動が変わることを理解する必要がある","position":{"start":{"line":19,"column":22,"offset":444},"end":{"line":19,"column":48,"offset":470}}}],"position":{"start":{"line":19,"column":1,"offset":423},"end":{"line":19,"column":48,"offset":470}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"rootDirs"}],"position":{"start":{"line":20,"column":3,"offset":473},"end":{"line":20,"column":13,"offset":483}}},{"type":"text","value":" が入る（TypeScript 2.0~)","position":{"start":{"line":20,"column":13,"offset":483},"end":{"line":20,"column":34,"offset":504}}}],"position":{"start":{"line":20,"column":1,"offset":471},"end":{"line":20,"column":34,"offset":504}}},{"type":"text","value":"\n"}],"position":{"start":{"line":19,"column":1,"offset":423},"end":{"line":20,"column":34,"offset":504}}}],"data":{"quirksMode":false},"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":1,"offset":0}}},"raw":"\n# TypeScriptでpower-assertを使いたい\n\n[TypeScript テストについて](https://9renpoto.github.io/entry/2016/06/23/typescript-module-test/) 少し調べました。\n\n- <https://github.com/9renpoto/ts/pull/31>\n\n## 原因\n\n- TypeScriptがファイルパスを相対パスか絶対パスのどちらかで返す場合がある\n  - <https://github.com/Microsoft/TypeScript/blob/204f2c16c0d6ff851e4798c03a9646b625ac2bd7/src/compiler/core.ts#L821-L825>\n\n## 対策\n\n- <https://github.com/teppeis/typescript-simple/pull/47>\n\n## 悩み\n\n- `rootDir`, `outDir` の組み合わせで挙動が変わることを理解する必要がある\n- `rootDirs` が入る（TypeScript 2.0~)\n"}