{"data":{"title":"Frontend JavaScript Anti-pattern","date":"2017-10-31T14:00:00.000Z","permalink":"/entry/2017/10/31/frontend-javascript-anti-pattern/","category":"js","_entry":"posts/js/2017-10-31-frontend-js-anti-pattern.md","page":"post","name":"frontend-js-anti-pattern","url":"/entry/2017/10/31/frontend-javascript-anti-pattern/"},"content":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"TL;DR","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":8,"offset":8}}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":8,"offset":8}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"自分のエゴで書いてる手癖や無駄な努力をコードレビューするのは非生産的","position":{"start":{"line":4,"column":3,"offset":12},"end":{"line":4,"column":37,"offset":46}}}],"position":{"start":{"line":4,"column":1,"offset":10},"end":{"line":4,"column":37,"offset":46}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"積極的にlinterを採用","position":{"start":{"line":5,"column":3,"offset":49},"end":{"line":5,"column":16,"offset":62}}}],"position":{"start":{"line":5,"column":1,"offset":47},"end":{"line":5,"column":16,"offset":62}}},{"type":"text","value":"\n"}],"position":{"start":{"line":4,"column":1,"offset":10},"end":{"line":5,"column":16,"offset":62}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"test","position":{"start":{"line":7,"column":4,"offset":67},"end":{"line":7,"column":8,"offset":71}}}],"position":{"start":{"line":7,"column":1,"offset":64},"end":{"line":7,"column":8,"offset":71}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-js"]},"children":[{"type":"text","value":"import assert from \"assert\";\n\ndescribe(\"test\", () => {\n  const { func } = require(\"./module\");\n  it(\"func\", () => {\n    assert(func(\"a\") === \"a\");\n  });\n});\n"}],"position":{"start":{"line":9,"column":1,"offset":73},"end":{"line":18,"column":4,"offset":239}}}],"position":{"start":{"line":9,"column":1,"offset":73},"end":{"line":18,"column":4,"offset":239}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"1ファイル、single ","position":{"start":{"line":20,"column":4,"offset":244},"end":{"line":20,"column":17,"offset":257}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"describe"}],"position":{"start":{"line":20,"column":17,"offset":257},"end":{"line":20,"column":27,"offset":267}}}],"position":{"start":{"line":20,"column":4,"offset":244},"end":{"line":20,"column":27,"offset":267}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"親を1つ ","position":{"start":{"line":21,"column":7,"offset":274},"end":{"line":21,"column":12,"offset":279}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"describe.skip"}],"position":{"start":{"line":21,"column":12,"offset":279},"end":{"line":21,"column":27,"offset":294}}},{"type":"text","value":" ","position":{"start":{"line":21,"column":27,"offset":294},"end":{"line":21,"column":28,"offset":295}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"describe.only"}],"position":{"start":{"line":21,"column":28,"offset":295},"end":{"line":21,"column":43,"offset":310}}},{"type":"text","value":" できれば一旦闇を保留にできることが多い","position":{"start":{"line":21,"column":43,"offset":310},"end":{"line":21,"column":63,"offset":330}}}],"position":{"start":{"line":21,"column":4,"offset":271},"end":{"line":21,"column":63,"offset":330}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"1ファイルの持っている役割が大きすぎない、特に困っていない","position":{"start":{"line":22,"column":7,"offset":337},"end":{"line":22,"column":36,"offset":366}}}],"position":{"start":{"line":22,"column":4,"offset":334},"end":{"line":22,"column":36,"offset":366}}},{"type":"text","value":"\n"}],"position":{"start":{"line":21,"column":4,"offset":271},"end":{"line":22,"column":36,"offset":366}}},{"type":"text","value":"\n"}],"position":{"start":{"line":20,"column":1,"offset":241},"end":{"line":22,"column":36,"offset":366}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"テスト対象は ","position":{"start":{"line":23,"column":4,"offset":370},"end":{"line":23,"column":11,"offset":377}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"describe"}],"position":{"start":{"line":23,"column":11,"offset":377},"end":{"line":23,"column":21,"offset":387}}},{"type":"text","value":" の中でrequireする","position":{"start":{"line":23,"column":21,"offset":387},"end":{"line":23,"column":34,"offset":400}}}],"position":{"start":{"line":23,"column":4,"offset":370},"end":{"line":23,"column":34,"offset":400}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"describe.only"}],"position":{"start":{"line":24,"column":7,"offset":407},"end":{"line":24,"column":22,"offset":422}}},{"type":"text","value":" 実行をした際に不要なsrcを読み込まなくて良い","position":{"start":{"line":24,"column":22,"offset":422},"end":{"line":24,"column":46,"offset":446}}}],"position":{"start":{"line":24,"column":4,"offset":404},"end":{"line":24,"column":46,"offset":446}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"読み込まれただけで実行される関数はcoverageに含まれてしまう","position":{"start":{"line":25,"column":7,"offset":453},"end":{"line":25,"column":40,"offset":486}}}],"position":{"start":{"line":25,"column":4,"offset":450},"end":{"line":25,"column":40,"offset":486}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"coverage report"}],"position":{"start":{"line":26,"column":7,"offset":493},"end":{"line":26,"column":24,"offset":510}}},{"type":"text","value":" が読みやすい","position":{"start":{"line":26,"column":24,"offset":510},"end":{"line":26,"column":31,"offset":517}}}],"position":{"start":{"line":26,"column":4,"offset":490},"end":{"line":26,"column":31,"offset":517}}},{"type":"text","value":"\n"}],"position":{"start":{"line":24,"column":4,"offset":404},"end":{"line":26,"column":31,"offset":517}}},{"type":"text","value":"\n"}],"position":{"start":{"line":23,"column":1,"offset":367},"end":{"line":26,"column":31,"offset":517}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"this"}],"position":{"start":{"line":27,"column":4,"offset":521},"end":{"line":27,"column":10,"offset":527}}},{"type":"text","value":" を使わない","position":{"start":{"line":27,"column":10,"offset":527},"end":{"line":27,"column":16,"offset":533}}}],"position":{"start":{"line":27,"column":4,"offset":521},"end":{"line":27,"column":16,"offset":533}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"unused変数をlintで発見しやすい","position":{"start":{"line":28,"column":7,"offset":540},"end":{"line":28,"column":27,"offset":560}}}],"position":{"start":{"line":28,"column":4,"offset":537},"end":{"line":28,"column":27,"offset":560}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"長い","position":{"start":{"line":29,"column":7,"offset":567},"end":{"line":29,"column":9,"offset":569}}}],"position":{"start":{"line":29,"column":4,"offset":564},"end":{"line":29,"column":9,"offset":569}}},{"type":"text","value":"\n"}],"position":{"start":{"line":28,"column":4,"offset":537},"end":{"line":29,"column":9,"offset":569}}},{"type":"text","value":"\n"}],"position":{"start":{"line":27,"column":1,"offset":518},"end":{"line":29,"column":9,"offset":569}}},{"type":"text","value":"\n"}],"position":{"start":{"line":20,"column":1,"offset":241},"end":{"line":29,"column":9,"offset":569}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"src","position":{"start":{"line":31,"column":4,"offset":574},"end":{"line":31,"column":7,"offset":577}}}],"position":{"start":{"line":31,"column":1,"offset":571},"end":{"line":31,"column":7,"offset":577}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-js"]},"children":[{"type":"text","value":"function mapStateToProps({ todos }: State) {\n  return {\n    tasks: { todos },\n    onUpdate: id => todos[id].done()\n  };\n}\n"}],"position":{"start":{"line":33,"column":1,"offset":579},"end":{"line":40,"column":4,"offset":710}}}],"position":{"start":{"line":33,"column":1,"offset":579},"end":{"line":40,"column":4,"offset":710}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"arrow function"}],"position":{"start":{"line":42,"column":4,"offset":715},"end":{"line":42,"column":20,"offset":731}}},{"type":"text","value":" vs ","position":{"start":{"line":42,"column":20,"offset":731},"end":{"line":42,"column":24,"offset":735}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"function"}],"position":{"start":{"line":42,"column":24,"offset":735},"end":{"line":42,"column":34,"offset":745}}}],"position":{"start":{"line":42,"column":4,"offset":715},"end":{"line":42,"column":34,"offset":745}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"IE11を意識した場合、変換したら結局 ","position":{"start":{"line":43,"column":7,"offset":752},"end":{"line":43,"column":27,"offset":772}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"function"}],"position":{"start":{"line":43,"column":27,"offset":772},"end":{"line":43,"column":37,"offset":782}}},{"type":"text","value":" となる","position":{"start":{"line":43,"column":37,"offset":782},"end":{"line":43,"column":41,"offset":786}}}],"position":{"start":{"line":43,"column":4,"offset":749},"end":{"line":43,"column":41,"offset":786}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"読みやすさと生成された後のコードを妄想しつつ相談","position":{"start":{"line":44,"column":7,"offset":793},"end":{"line":44,"column":31,"offset":817}}}],"position":{"start":{"line":44,"column":4,"offset":790},"end":{"line":44,"column":31,"offset":817}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"つい書きやすさと ","position":{"start":{"line":45,"column":7,"offset":824},"end":{"line":45,"column":16,"offset":833}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"return"}],"position":{"start":{"line":45,"column":16,"offset":833},"end":{"line":45,"column":24,"offset":841}}},{"type":"text","value":" の省略したさで ","position":{"start":{"line":45,"column":24,"offset":841},"end":{"line":45,"column":33,"offset":850}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"arrow function"}],"position":{"start":{"line":45,"column":33,"offset":850},"end":{"line":45,"column":49,"offset":866}}},{"type":"text","value":" を使うことも多い","position":{"start":{"line":45,"column":49,"offset":866},"end":{"line":45,"column":58,"offset":875}}}],"position":{"start":{"line":45,"column":4,"offset":821},"end":{"line":45,"column":58,"offset":875}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"読みやすければそれでいい気持ちになってきている","position":{"start":{"line":46,"column":7,"offset":882},"end":{"line":46,"column":30,"offset":905}}}],"position":{"start":{"line":46,"column":4,"offset":879},"end":{"line":46,"column":30,"offset":905}}},{"type":"text","value":"\n"}],"position":{"start":{"line":43,"column":4,"offset":749},"end":{"line":46,"column":30,"offset":905}}},{"type":"text","value":"\n"}],"position":{"start":{"line":42,"column":1,"offset":712},"end":{"line":46,"column":30,"offset":905}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"class"}],"position":{"start":{"line":47,"column":4,"offset":909},"end":{"line":47,"column":11,"offset":916}}},{"type":"text","value":" syntaxを避ける","position":{"start":{"line":47,"column":11,"offset":916},"end":{"line":47,"column":22,"offset":927}}}],"position":{"start":{"line":47,"column":4,"offset":909},"end":{"line":47,"column":22,"offset":927}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"ライブラリを開発しているときには使うけれどプロダクトを書く時には意識する","position":{"start":{"line":48,"column":7,"offset":934},"end":{"line":48,"column":43,"offset":970}}}],"position":{"start":{"line":48,"column":4,"offset":931},"end":{"line":48,"column":43,"offset":970}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"結局 ","position":{"start":{"line":49,"column":7,"offset":977},"end":{"line":49,"column":10,"offset":980}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"this"}],"position":{"start":{"line":49,"column":10,"offset":980},"end":{"line":49,"column":16,"offset":986}}},{"type":"text","value":" に状態を持たせる意味がそのclassにあるかが大事","position":{"start":{"line":49,"column":16,"offset":986},"end":{"line":49,"column":42,"offset":1012}}}],"position":{"start":{"line":49,"column":4,"offset":974},"end":{"line":49,"column":42,"offset":1012}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"ファイルサイズがデカくなる","position":{"start":{"line":50,"column":7,"offset":1019},"end":{"line":50,"column":20,"offset":1032}}}],"position":{"start":{"line":50,"column":4,"offset":1016},"end":{"line":50,"column":20,"offset":1032}}},{"type":"text","value":"\n"}],"position":{"start":{"line":48,"column":4,"offset":931},"end":{"line":50,"column":20,"offset":1032}}},{"type":"text","value":"\n"}],"position":{"start":{"line":47,"column":1,"offset":906},"end":{"line":50,"column":20,"offset":1032}}},{"type":"text","value":"\n"}],"position":{"start":{"line":42,"column":1,"offset":712},"end":{"line":50,"column":20,"offset":1032}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-js"]},"children":[{"type":"text","value":"var touch = \"touch\";\n$(\"#id\").on(`${touch}start ${touch}end`, e => {\n  console.log(e);\n});\n\nfunction a(element) {\n  // var element と書く３文字を省略して１文字にできる\n  element = document.getElementById(\"foo\");\n  element.addEventListener(\"click\", e => console.log(e));\n}\n"}],"position":{"start":{"line":52,"column":1,"offset":1034},"end":{"line":63,"column":4,"offset":1297}}}],"position":{"start":{"line":52,"column":1,"offset":1034},"end":{"line":63,"column":4,"offset":1297}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"長い文字列は変数で受けて結合する","position":{"start":{"line":65,"column":4,"offset":1302},"end":{"line":65,"column":20,"offset":1318}}}],"position":{"start":{"line":65,"column":4,"offset":1302},"end":{"line":65,"column":20,"offset":1318}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"小さいことを売りにしているライブラリで見る","position":{"start":{"line":66,"column":7,"offset":1325},"end":{"line":66,"column":28,"offset":1346}}}],"position":{"start":{"line":66,"column":4,"offset":1322},"end":{"line":66,"column":28,"offset":1346}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"計算量も大事だが地道なファイルサイズ対策","position":{"start":{"line":67,"column":7,"offset":1353},"end":{"line":67,"column":27,"offset":1373}}}],"position":{"start":{"line":67,"column":4,"offset":1350},"end":{"line":67,"column":27,"offset":1373}}},{"type":"text","value":"\n"}],"position":{"start":{"line":66,"column":4,"offset":1322},"end":{"line":67,"column":27,"offset":1373}}},{"type":"text","value":"\n"}],"position":{"start":{"line":65,"column":1,"offset":1299},"end":{"line":67,"column":27,"offset":1373}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"無駄な引数を定義する","position":{"start":{"line":68,"column":4,"offset":1377},"end":{"line":68,"column":14,"offset":1387}}}],"position":{"start":{"line":68,"column":4,"offset":1377},"end":{"line":68,"column":14,"offset":1387}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"変数定義分の文字列を節約させる","position":{"start":{"line":69,"column":7,"offset":1394},"end":{"line":69,"column":22,"offset":1409}}}],"position":{"start":{"line":69,"column":4,"offset":1391},"end":{"line":69,"column":22,"offset":1409}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"htmlのタグなどを書く際に利用されている場合がある","position":{"start":{"line":70,"column":7,"offset":1416},"end":{"line":70,"column":33,"offset":1442}}}],"position":{"start":{"line":70,"column":4,"offset":1413},"end":{"line":70,"column":33,"offset":1442}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"linterで積極的に使うなと怒られる（怒られる方が平和）","position":{"start":{"line":71,"column":7,"offset":1449},"end":{"line":71,"column":36,"offset":1478}}}],"position":{"start":{"line":71,"column":4,"offset":1446},"end":{"line":71,"column":36,"offset":1478}}},{"type":"text","value":"\n"}],"position":{"start":{"line":69,"column":4,"offset":1391},"end":{"line":71,"column":36,"offset":1478}}},{"type":"text","value":"\n"}],"position":{"start":{"line":68,"column":1,"offset":1374},"end":{"line":71,"column":36,"offset":1478}}},{"type":"text","value":"\n"}],"position":{"start":{"line":65,"column":1,"offset":1299},"end":{"line":71,"column":36,"offset":1478}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"まとめ","position":{"start":{"line":73,"column":4,"offset":1483},"end":{"line":73,"column":7,"offset":1486}}}],"position":{"start":{"line":73,"column":1,"offset":1480},"end":{"line":73,"column":7,"offset":1486}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"圧倒的老害感。","position":{"start":{"line":75,"column":1,"offset":1488},"end":{"line":75,"column":8,"offset":1495}}}],"position":{"start":{"line":75,"column":1,"offset":1488},"end":{"line":75,"column":8,"offset":1495}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"http://4.bp.blogspot.com/-foiW8aYeL6s/VzZu-o6sxnI/AAAAAAAA6oQ/LHXzT0WsAX8LtB_U-msHk572kC_rY3VawCLcB/s800/mental_health_man.png","alt":"image"},"children":[],"position":{"start":{"line":77,"column":1,"offset":1497},"end":{"line":77,"column":137,"offset":1633}}}],"position":{"start":{"line":77,"column":1,"offset":1497},"end":{"line":77,"column":137,"offset":1633}}}],"data":{"quirksMode":false},"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":1,"offset":0}}},"raw":"\n# TL;DR\n\n- 自分のエゴで書いてる手癖や無駄な努力をコードレビューするのは非生産的\n- 積極的にlinterを採用\n\n## test\n\n```js\nimport assert from \"assert\";\n\ndescribe(\"test\", () => {\n  const { func } = require(\"./module\");\n  it(\"func\", () => {\n    assert(func(\"a\") === \"a\");\n  });\n});\n```\n\n1. 1ファイル、single `describe`\n   1. 親を1つ `describe.skip` `describe.only` できれば一旦闇を保留にできることが多い\n   1. 1ファイルの持っている役割が大きすぎない、特に困っていない\n1. テスト対象は `describe` の中でrequireする\n   1. `describe.only` 実行をした際に不要なsrcを読み込まなくて良い\n   1. 読み込まれただけで実行される関数はcoverageに含まれてしまう\n   1. `coverage report` が読みやすい\n1. `this` を使わない\n   1. unused変数をlintで発見しやすい\n   1. 長い\n\n## src\n\n```js\nfunction mapStateToProps({ todos }: State) {\n  return {\n    tasks: { todos },\n    onUpdate: id => todos[id].done()\n  };\n}\n```\n\n1. `arrow function` vs `function`\n   1. IE11を意識した場合、変換したら結局 `function` となる\n   1. 読みやすさと生成された後のコードを妄想しつつ相談\n   1. つい書きやすさと `return` の省略したさで `arrow function` を使うことも多い\n   1. 読みやすければそれでいい気持ちになってきている\n1. `class` syntaxを避ける\n   1. ライブラリを開発しているときには使うけれどプロダクトを書く時には意識する\n   1. 結局 `this` に状態を持たせる意味がそのclassにあるかが大事\n   1. ファイルサイズがデカくなる\n\n```js\nvar touch = \"touch\";\n$(\"#id\").on(`${touch}start ${touch}end`, e => {\n  console.log(e);\n});\n\nfunction a(element) {\n  // var element と書く３文字を省略して１文字にできる\n  element = document.getElementById(\"foo\");\n  element.addEventListener(\"click\", e => console.log(e));\n}\n```\n\n1. 長い文字列は変数で受けて結合する\n   1. 小さいことを売りにしているライブラリで見る\n   1. 計算量も大事だが地道なファイルサイズ対策\n1. 無駄な引数を定義する\n   1. 変数定義分の文字列を節約させる\n   1. htmlのタグなどを書く際に利用されている場合がある\n   1. linterで積極的に使うなと怒られる（怒られる方が平和）\n\n## まとめ\n\n圧倒的老害感。\n\n![image](http://4.bp.blogspot.com/-foiW8aYeL6s/VzZu-o6sxnI/AAAAAAAA6oQ/LHXzT0WsAX8LtB_U-msHk572kC_rY3VawCLcB/s800/mental_health_man.png)\n"}