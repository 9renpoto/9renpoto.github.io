<!doctype html><html lang="ja"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="shortcut icon" href="https://9renpoto.github.io/ico/favicon.ico"><link rel="stylesheet" href="https://9renpoto.github.io/assets/delic.bundle.css"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"><script async src="https://9renpoto.github.io/assets/delic.bundle.js"></script><title>入門chef</title><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-TD87SR" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer',"GTM-TD87SR");</script></head><body role="document" data-twttr-rendered="true"><div class="nav"><div class="nav-left"><a class="nav-item title" href="/">:-)</a></div><div class="nav-right nav-menu"><a class="nav-item" href="https://github.com/9renpoto"><span class="icon"><i class="fa fa-github"></i></span> </a><a class="nav-item" href="https://www.facebook.com/9renpoto"><span class="icon"><i class="fa fa-facebook"></i></span> </a><a class="nav-item" href="https://twitter.com/9renpoto"><span class="icon"><i class="fa fa-twitter"></i></span> </a><a class="nav-item" href="https://www.youtube.com/channel/UCHkajp8KwHzG-88kcNoRAbw"><span class="icon"><i class="fa fa-youtube"></i></span> </a><a class="nav-item" href="https://9renpoto.github.io/blog/">blog</a> <a class="nav-item" href="https://9renpoto.github.io/profile/">profile</a> <a class="nav-item" href="https://9renpoto.github.io/slides/">slides</a></div></div><article role="main" class="post"><header><section class="hero is-primary"><div class="hero-body"><div class="container"><h1 class="title"><a href="https://9renpoto.github.io/blog/2013/12/22/my-first-chef/">入門chef</a></h1><h2 class="subtitle"><div class="columns"><div class="column"><time datetime="2013-12-22T00:00:00Z">December 22, 2013</time></div></div></h2></div></div></section></header><section class="section"><div class="container is-fluid"><div class="content"><h1 id="chef-memo">chef memo</h1><p>環境構築といえば、chefだという噂を随分と聞くようになってきましたが、 なんだかんだと使ってなかったのでメモ。 とはいえ、レシピは誰かが書いてるので、 今回は出来る限りレシピを使う方法で構築を目指す。</p><h2 id="前準備">前準備</h2><pre><code class="language-ruby"># Gemfileに記載
source 'https://rubygems。org'  # URLの指定。呪文だと思って毎回書く

gem 'berkshelf'
gem 'chef'
gem 'knife-solo'
</code></pre><p>必要なgemをいつものように。</p><pre><code class="language-sh">bundle install
</code></pre><p>chef-soloを使えるように初期設定を行う。</p><pre><code class="language-sh">bundle exec knife configure
</code></pre><h2 id="そろそろchef">そろそろchef</h2><p>ひな形の生成。</p><pre><code class="language-bash">$ bundle exec knife solo init chef-repo
$ tree chef-repo/
chef-repo/
├── cookbooks
├── data_bags
├── nodes
├── roles
├── site-cookbooks
└── solo。rb
</code></pre><p>忘れないうちにコミット。</p><pre><code class="language-sh">cd chef-repo
git init
git add 。
git commit -m 'first commit'
</code></pre><p>公式なり、Githubにて公開されているレシピを利用しやすくるものとして <strong>Berksfile</strong> があります。</p><pre><code class="language-ruby">site :opscode # Berksfile

cookbook &quot;apt&quot;
cookbook &quot;git&quot;
cookbook &quot;zsh&quot;
cookbook 'vim'
cookbook 'the_silver_searcher'
</code></pre><p>公開されているレシピの情報を記述しておけば、コマンド1つで落としてこれます。 便利。</p><pre><code class="language-sh">bundle exec berks install --path cookbooks
</code></pre><p>vagrant側でchefが使えるように以下のコマンドを実行。</p><pre><code class="language-sh">bundle exec knife solo prepare nodename
</code></pre><p>インストールしたいレシピを追加 node/nodename.json。</p><pre><code class="language-js">{
  &quot;run_list&quot;: [
    &quot;recipe[apt]&quot;,
    &quot;recipe[git]&quot;,
    &quot;recipe[zsh]&quot;,
    &quot;recipe[vim]&quot;,
    &quot;recipe[the_silver_searcher]&quot;
  ]
}
</code></pre><p>レシピはできたのでcookしましょう。</p><pre><code class="language-sh">bundle exec knife solo cook nodename
</code></pre><h2 id="参考">参考</h2><ul><li><a href="http://qiita.com/uchiunyo/items/5aa243f7a39ae443e10d">qiita.com/uchiunyo/item</a></li></ul></div></div></section><section class="section"><a class="button is-info" href="https://9renpoto.github.io/categories/ruby/">ruby </a><a class="button is-info" href="https://9renpoto.github.io/categories/chef/">chef</a></section></article></body></html>