<!doctype html><html lang=ja><head><meta charset=utf-8><meta name=viewport content="width=device-width, initial-scale=1.0"><link rel="shortcut icon" href=https://9renpoto.github.io/ico/favicon.ico><link rel=stylesheet href=https://9renpoto.github.io/assets/delic.bundle.css><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css><script async src=https://9renpoto.github.io/assets/delic.bundle.js></script><title>入門chef</title><noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-TD87SR" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer',"GTM-TD87SR");</script></head><body role=document data-twttr-rendered=true><div class=nav><div class=nav-left><a class="nav-item title" href="/">:-)</a></div><div class="nav-right nav-menu"><a class=nav-item href=https://github.com/9renpoto><span class=icon><i class="fa fa-github"></i></span></a> <a class=nav-item href=https://twitter.com/9renpoto><span class=icon><i class="fa fa-twitter"></i></span></a> <a class=nav-item href="https://9renpoto.github.io/blog/">blog</a> <a class=nav-item href="https://9renpoto.github.io/profile/">profile</a> <a class=nav-item href="https://9renpoto.github.io/slides/">slides</a></div></div><article role=main class=post><header><section class="hero is-primary"><div class=hero-body><div class=container><h1 class=title>入門chef</h1><h2 class=subtitle><div class=columns><div class=column><time datetime=2013-12-22T00:00:00Z>December 22, 2013</time></div></div></h2></div></div></section></header><section class=section><div class="container is-fluid"><div class=content><h1 id=chef-memo>chef memo</h1><p>環境構築といえば、chefだという噂を随分と聞くようになってきましたが、 なんだかんだと使ってなかったのでメモ。 とはいえ、レシピは誰かが書いてるので、 今回は出来る限りレシピを使う方法で構築を目指す</p><h2 id=前準備>前準備</h2><pre><code class=language-ruby># Gemfileに記載
source 'https://rubygems。org'  # URLの指定。呪文だと思って毎回書く

gem 'berkshelf'
gem 'chef'
gem 'knife-solo'
</code></pre><p>必要なgemをいつものように</p><pre><code class=language-sh>bundle install
</code></pre><p>chef-soloを使えるように初期設定を行う</p><pre><code class=language-sh>bundle exec knife configure
</code></pre><h2 id=そろそろchef>そろそろchef</h2><p>ひな形の生成</p><pre><code class=language-bash>$ bundle exec knife solo init chef-repo
$ tree chef-repo/
chef-repo/
├── cookbooks
├── data_bags
├── nodes
├── roles
├── site-cookbooks
└── solo。rb
</code></pre><p>忘れないうちにコミット</p><pre><code class=language-sh>cd chef-repo
git init
git add 。
git commit -m 'first commit'
</code></pre><p>公式なり、Githubにて公開されているレシピを利用しやすくるものとして <strong>Berksfile</strong> があります</p><pre><code class=language-ruby>site :opscode # Berksfile

cookbook &quot;apt&quot;
cookbook &quot;git&quot;
cookbook &quot;zsh&quot;
cookbook 'vim'
cookbook 'the_silver_searcher'
</code></pre><p>公開されているレシピの情報を記述しておけば、コマンド1つで落としてこれます。 便利</p><pre><code class=language-sh>bundle exec berks install --path cookbooks
</code></pre><p>vagrant側でchefが使えるように以下のコマンドを実行</p><pre><code class=language-sh>bundle exec knife solo prepare nodename
</code></pre><p>インストールしたいレシピを追加 node/nodename.json</p><pre><code class=language-js>{
  &quot;run_list&quot;: [
    &quot;recipe[apt]&quot;,
    &quot;recipe[git]&quot;,
    &quot;recipe[zsh]&quot;,
    &quot;recipe[vim]&quot;,
    &quot;recipe[the_silver_searcher]&quot;
  ]
}
</code></pre><p>レシピはできたのでcookしましょう</p><pre><code class=language-sh>bundle exec knife solo cook nodename
</code></pre><h2 id=参考>参考</h2><ul><li><a href="http://tsuchikazu.net/chef_solo_start/">tsuchikazu.net/chef_solo_start</a></li><li><a href=http://qiita.com/uchiunyo/items/5aa243f7a39ae443e10d>qiita.com/uchiunyo/item</a></li></ul><h2 id=最後に>最後に</h2><p>これ以上のことは以下を買ってから勉強します</p><div class=booklog_html><table><tr><td class=booklog_html_image><a href=http://www。amazon。co。jp/%E5%85%A5%E9%96%80Chef-Solo-Infrastructure-as-Code-ebook/dp/B00BSPH158%3FSubscriptionId%3D0AVSM5SVKRWTFMG7ZR82%26tag%3Dbooklog。jp-22%26linkCode%3Dxm2%26camp%3D2025%26creative%3D165953%26creativeASIN%3DB00BSPH158 target=_blank><img src=http://ecx。images-amazon。com/images/I/31u6VLGX2kL。_SL160_。jpg width=93 height=150 style=border:0;border-radius:0;></a></td><td class=booklog_html_info style=padding-left:20px;><div class=booklog_html_title style=margin-bottom:10px;font-size:14px;font-weight:bold;><a href=http://www。amazon。co。jp/%E5%85%A5%E9%96%80Chef-Solo-Infrastructure-as-Code-ebook/dp/B00BSPH158%3FSubscriptionId%3D0AVSM5SVKRWTFMG7ZR82%26tag%3Dbooklog。jp-22%26linkCode%3Dxm2%26camp%3D2025%26creative%3D165953%26creativeASIN%3DB00BSPH158 target=_blank>入門Chef Solo - Infrastructure as Code</a></div><div style=margin-bottom:10px;><div class=booklog_html_author style=margin-bottom:15px;font-size:12px;;line-height:1。2em>著者 : <a href=http://booklog。jp/author/%E4%BC%8A%E8%97%A4%E7%9B%B4%E4%B9%9F target=_blank>伊藤直也</a></div><div class=booklog_html_manufacturer style=margin-bottom:5px;font-size:12px;;line-height:1。2em>伊藤直也</div><div class=booklog_html_release style=font-size:12px;;line-height:1。2em>発売日 : 2013-03-11</div></div><div class=booklog_html_link_amazon><a href=http://booklog。jp/item/1/B00BSPH158 style=font-size:12px; target=_blank>ブクログでレビューを見る»</a></div></td></tr></table></div></div></div></section><section class=section><a class="button is-info" href="https://9renpoto.github.io/categories/ruby/">ruby</a> <a class="button is-info" href="https://9renpoto.github.io/categories/chef/">chef</a></section><div id=disqus_thread></div><script type=text/javascript>
    (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//9renpoto.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></article></body></html>