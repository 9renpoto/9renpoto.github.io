{"data":{"date":"2018-12-13T09:00:00.000Z","permalink":"/entry/2018/12/13/nextjs-enviroments/","title":"next.js で `process.env` 以下の環境変数を参照する","category":"react","_entry":"posts/js/nextjs-enviroments.md","page":"post","name":"nextjs-enviroments","url":"/entry/2018/12/13/nextjs-enviroments/"},"content":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"TL;DR"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"next/config"}]},{"type":"text","value":" をとりあえず使う"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"webpack.DefinePlugin"}]},{"type":"text","value":" を使う"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"refs: "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/zeit/next.js/issues/3605"},"children":[{"type":"text","value":"https://github.com/zeit/next.js/issues/3605"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"なれてるし使いたい。わかる"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"イマイチ推奨されてないようで、 "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/zeit/next.js/issues/3605#issuecomment-359512586"},"children":[{"type":"text","value":"複数のサンプルが紹介されている"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"babel-plugin-transform-define"}]},{"type":"text","value":" を使う"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"refs: "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/zeit/next.js/tree/master/examples/with-universal-configuration-build-time"},"children":[{"type":"text","value":"https://github.com/zeit/next.js/tree/master/examples/with-universal-configuration-build-time"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"babel7に対応してない（2018/12現在）。"},{"type":"element","tagName":"a","properties":{"href":"https://github.com/FormidableLabs/babel-plugin-transform-define/pull/49"},"children":[{"type":"text","value":"PR はあるけれど放置されている"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"dotenv-webpack"}]},{"type":"text","value":" を使う"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"refs: "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/zeit/next.js/tree/canary/examples/with-dotenv"},"children":[{"type":"text","value":"https://github.com/zeit/next.js/tree/canary/examples/with-dotenv"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"dockerの下りで "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":".envrc"}]},{"type":"text","value":" ではなく "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":".env"}]},{"type":"text","value":" を利用するプロダクトが増えた"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"よしなに展開してくれる"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"標準で用意されている仕組みを使う"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"refs"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://spectrum.chat/next-js/general/runtime-configs-with-process-env~55b503c2-07f4-4da3-9ba4-287733b3d622"},"children":[{"type":"text","value":"https://spectrum.chat/next-js/general/runtime-configs-with-process-env~55b503c2-07f4-4da3-9ba4-287733b3d622"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/zeit/next.js#exposing-configuration-to-the-server--client-side"},"children":[{"type":"text","value":"https://github.com/zeit/next.js#exposing-configuration-to-the-server--client-side"}]}]},{"type":"text","value":"\n"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"clientでは配信したくない環境変数とか確かにある"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"面倒だけれど別々に宣言的管理する"}]},{"type":"text","value":"\n"}]}],"data":{"quirksMode":false}},"raw":"\n# TL;DR\n\n- `next/config` をとりあえず使う\n\n## `webpack.DefinePlugin` を使う\n\n- refs: <https://github.com/zeit/next.js/issues/3605>\n- なれてるし使いたい。わかる\n- イマイチ推奨されてないようで、 [複数のサンプルが紹介されている](https://github.com/zeit/next.js/issues/3605#issuecomment-359512586)\n\n## `babel-plugin-transform-define` を使う\n\n- refs: <https://github.com/zeit/next.js/tree/master/examples/with-universal-configuration-build-time>\n- babel7に対応してない（2018/12現在）。[PR はあるけれど放置されている](https://github.com/FormidableLabs/babel-plugin-transform-define/pull/49)\n\n## `dotenv-webpack` を使う\n\n- refs: <https://github.com/zeit/next.js/tree/canary/examples/with-dotenv>\n- dockerの下りで `.envrc` ではなく `.env` を利用するプロダクトが増えた\n- よしなに展開してくれる\n\n## 標準で用意されている仕組みを使う\n\n- refs\n  - <https://spectrum.chat/next-js/general/runtime-configs-with-process-env~55b503c2-07f4-4da3-9ba4-287733b3d622>\n  - <https://github.com/zeit/next.js#exposing-configuration-to-the-server--client-side>\n- clientでは配信したくない環境変数とか確かにある\n- 面倒だけれど別々に宣言的管理する\n"}