{"data":{"date":"2017-05-14T13:39:17.000Z","permalink":"/entry/2017/05/14/slack-channel-active-reminder/","title":"アクティブでなさそうなSlackチャンネルをArchiveお願いする","category":"js","_entry":"posts/js/2017-05-14-slack-channel-active-reminder.md","page":"post","name":"slack-channel-active-reminder","url":"/entry/2017/05/14/slack-channel-active-reminder/"},"content":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"slack-channel-active-reminder","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":32,"offset":32}}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":32,"offset":32}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"書いたもの： ","position":{"start":{"line":4,"column":1,"offset":34},"end":{"line":4,"column":8,"offset":41}}},{"type":"element","tagName":"a","properties":{"href":"https://github.com/9renpoto/slack-channel-active-reminder"},"children":[{"type":"text","value":"https://github.com/9renpoto/slack-channel-active-reminder","position":{"start":{"line":4,"column":9,"offset":42},"end":{"line":4,"column":66,"offset":99}}}],"position":{"start":{"line":4,"column":8,"offset":41},"end":{"line":4,"column":67,"offset":100}}}],"position":{"start":{"line":4,"column":1,"offset":34},"end":{"line":4,"column":67,"offset":100}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"/static/slack-channel-active-reminder.png","alt":"image"},"children":[],"position":{"start":{"line":6,"column":1,"offset":102},"end":{"line":6,"column":52,"offset":153}}}],"position":{"start":{"line":6,"column":1,"offset":102},"end":{"line":6,"column":52,"offset":153}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"slackの部屋は便利に増やしていけますが、\n同じような部屋が散乱したり、入ってみたものの活動が薄かったり様々あるので\n一定時間発言がない部屋に対してメッセージを送りつけるようなものを書いた。","position":{"start":{"line":8,"column":1,"offset":155},"end":{"line":10,"column":37,"offset":251}}}],"position":{"start":{"line":8,"column":1,"offset":155},"end":{"line":10,"column":37,"offset":251}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Usage","position":{"start":{"line":12,"column":4,"offset":256},"end":{"line":12,"column":9,"offset":261}}}],"position":{"start":{"line":12,"column":1,"offset":253},"end":{"line":12,"column":9,"offset":261}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Cronなどと合わせて仕込んで良いタイミングで発言がなさそうなところに対してメッセージを送る。","position":{"start":{"line":14,"column":1,"offset":263},"end":{"line":14,"column":48,"offset":310}}}],"position":{"start":{"line":14,"column":1,"offset":263},"end":{"line":14,"column":48,"offset":310}}},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-javascript"]},"children":[{"type":"text","value":"const CronJob = require(\"cron\").CronJob;\nconst Reminder = require(\"slack-channel-active-reminder\").default;\n\nconst reminder = new Reminder();\n\nconst job = new CronJob({\n  cronTime: \"0 00 18 * * 1-5\",\n  onTick: function() {\n    reminder.postRemindMessage();\n  },\n  start: false,\n  timeZone: \"Asia/Tokyo\"\n});\njob.start();\n"}],"position":{"start":{"line":16,"column":1,"offset":312},"end":{"line":31,"column":4,"offset":649}}}],"position":{"start":{"line":16,"column":1,"offset":312},"end":{"line":31,"column":4,"offset":649}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"中身は ","position":{"start":{"line":33,"column":1,"offset":651},"end":{"line":33,"column":5,"offset":655}}},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"@slack/client"}],"position":{"start":{"line":33,"column":5,"offset":655},"end":{"line":33,"column":20,"offset":670}}},{"type":"text","value":" を使っているだけ。\n便利なAPIが多いと助かる。","position":{"start":{"line":33,"column":20,"offset":670},"end":{"line":34,"column":15,"offset":695}}}],"position":{"start":{"line":33,"column":1,"offset":651},"end":{"line":34,"column":15,"offset":695}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"追記","position":{"start":{"line":36,"column":4,"offset":700},"end":{"line":36,"column":6,"offset":702}}}],"position":{"start":{"line":36,"column":1,"offset":697},"end":{"line":36,"column":6,"offset":702}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/9renpoto/slack-channel-active-reminder/pull/9"},"children":[{"type":"text","value":"https://github.com/9renpoto/slack-channel-active-reminder/pull/9","position":{"start":{"line":38,"column":2,"offset":705},"end":{"line":38,"column":66,"offset":769}}}],"position":{"start":{"line":38,"column":1,"offset":704},"end":{"line":38,"column":67,"offset":770}}}],"position":{"start":{"line":38,"column":1,"offset":704},"end":{"line":38,"column":67,"offset":770}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"flow gen-flow-files"}],"position":{"start":{"line":40,"column":1,"offset":772},"end":{"line":40,"column":22,"offset":793}}},{"type":"text","value":" が良いものをだしてくれないため外す。\n早く1.0が待ち遠しい。","position":{"start":{"line":40,"column":22,"offset":793},"end":{"line":41,"column":13,"offset":825}}}],"position":{"start":{"line":40,"column":1,"offset":772},"end":{"line":41,"column":13,"offset":825}}}],"data":{"quirksMode":false},"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1,"column":1,"offset":0}}},"raw":"\n# slack-channel-active-reminder\n\n書いたもの： <https://github.com/9renpoto/slack-channel-active-reminder>\n\n![image](/static/slack-channel-active-reminder.png)\n\nslackの部屋は便利に増やしていけますが、\n同じような部屋が散乱したり、入ってみたものの活動が薄かったり様々あるので\n一定時間発言がない部屋に対してメッセージを送りつけるようなものを書いた。\n\n## Usage\n\nCronなどと合わせて仕込んで良いタイミングで発言がなさそうなところに対してメッセージを送る。\n\n```javascript\nconst CronJob = require(\"cron\").CronJob;\nconst Reminder = require(\"slack-channel-active-reminder\").default;\n\nconst reminder = new Reminder();\n\nconst job = new CronJob({\n  cronTime: \"0 00 18 * * 1-5\",\n  onTick: function() {\n    reminder.postRemindMessage();\n  },\n  start: false,\n  timeZone: \"Asia/Tokyo\"\n});\njob.start();\n```\n\n中身は `@slack/client` を使っているだけ。\n便利なAPIが多いと助かる。\n\n## 追記\n\n<https://github.com/9renpoto/slack-channel-active-reminder/pull/9>\n\n`flow gen-flow-files` が良いものをだしてくれないため外す。\n早く1.0が待ち遠しい。\n"}