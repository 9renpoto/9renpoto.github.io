<!DOCTYPE html><html><head><meta charSet="utf-8" class="next-head next-head"/><title class="next-head">:-) 複数環境構築のためにLernaを使う、が</title><link rel="stylesheet" href="/static/bundle.css" class="next-head"/><link rel="preload" href="/_next/4c5a78e9-1332-43f5-89cd-e264f88db1b9/page/post.js" as="script"/><link rel="preload" href="/_next/4c5a78e9-1332-43f5-89cd-e264f88db1b9/page/_app.js" as="script"/><link rel="preload" href="/_next/4c5a78e9-1332-43f5-89cd-e264f88db1b9/page/_error.js" as="script"/><link rel="preload" href="/_next/static/commons/main-8b9f7bccc4bc5dfcc317.js" as="script"/></head><body><div id="__next"><header class="navbar"><div class="navbar-brand"><a class="navbar-item" href="/">:-)</a><div class="navbar-burger burger" data-target="navMenu"><span></span><span></span><span></span></div></div><div class="navbar-menu" id="navMenu"><div class="navbar-end"></div></div></header><section class="hero is-primary"><div class="hero-body"><div class="container"><h1 class="title">複数環境構築のためにLernaを使う、が</h1></div></div></section><section class="section"><div class="container is-fluid"><div class="content"><div><h1>TL;DR</h1>
<ul>
<li>期待通りに動かない</li>
</ul>
<h2>npm or yarn</h2>
<ul>
<li>
<p>npmClientを指定できるようだが、yarnを指定すると永遠にインストールが終わらない問題に出くわす</p>
<ul>
<li><a href="https://travis-ci.org/9renpoto/eslint-config/builds/281805776">https://travis-ci.org/9renpoto/eslint-config/builds/281805776</a></li>
<li>
<p><code>concurrency=1</code> を指定するなど試すもretryしてやっと動く程度</p>
<ul>
<li>期待するportに接続できていない？</li>
</ul>
</li>
</ul>
</li>
<li>
<p>npm v5</p>
<ul>
<li>何故かlernaを通してやると <code>dependencies</code> がrootに展開されず見つからない場合がある</li>
<li>
<p>ディレクトリ直下でやると問題ない場合がある</p>
<ul>
<li>バグっている気持ち</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2>lerna bootstrap</h2>
<ul>
<li>
<p>共通packageとは、本当はディレクトリ直下で行いたいができていないようにみえる</p>
<ul>
<li>lerna version 2.2.0</li>
<li>
<p>結局複数installを求められるものがある？</p>
<ul>
<li>eslint</li>
<li>typescript</li>
<li>flow-bin</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2>まとめ</h2>
<ul>
<li>
<p>原因は調べきれていないが、lernaが原因で使えていない問題はいろいろありそう</p>
<ul>
<li>issueは200以上ある</li>
</ul>
</li>
<li>早めに地雷を踏んでおく</li>
</ul>
<p><img src="http://3.bp.blogspot.com/-R1W3888HcbU/V9ppr9A_NHI/AAAAAAAA9wE/CuzJ-JfOQz8Ht6w-jNN79_vh6-TeVOGNACLcB/s800/jirai_tanchiki_man.png" alt="image"/></p></div></div></div></section></div><div id="__next-error"></div><script>
          __NEXT_DATA__ = {"props":{"pageProps":{"post":{"data":{"title":"複数環境構築のためにLernaを使う、が","date":"2017-10-02T02:00:00.000Z","permalink":"/entry/2017/10/02/monorepo/","page":"post","_entry":"posts/2017-10-02-monorepo/index.md","name":"index","category":"2017-10-02-monorepo","url":"/entry/2017/10/02/monorepo/"},"content":"# TL;DR\n\n- 期待通りに動かない\n\n## npm or yarn\n\n- npmClientを指定できるようだが、yarnを指定すると永遠にインストールが終わらない問題に出くわす\n  - \u003chttps://travis-ci.org/9renpoto/eslint-config/builds/281805776\u003e\n  - `concurrency=1` を指定するなど試すもretryしてやっと動く程度\n    - 期待するportに接続できていない？\n- npm v5\n  - 何故かlernaを通してやると `dependencies` がrootに展開されず見つからない場合がある\n  - ディレクトリ直下でやると問題ない場合がある\n    - バグっている気持ち\n\n## lerna bootstrap\n\n- 共通packageとは、本当はディレクトリ直下で行いたいができていないようにみえる\n  - lerna version 2.2.0\n  - 結局複数installを求められるものがある？\n    - eslint\n    - typescript\n    - flow-bin\n\n## まとめ\n\n- 原因は調べきれていないが、lernaが原因で使えていない問題はいろいろありそう\n  - issueは200以上ある\n- 早めに地雷を踏んでおく\n\n![image](http://3.bp.blogspot.com/-R1W3888HcbU/V9ppr9A_NHI/AAAAAAAA9wE/CuzJ-JfOQz8Ht6w-jNN79_vh6-TeVOGNACLcB/s800/jirai_tanchiki_man.png)\n"}}},"page":"/post","pathname":"/post","query":{"_entry":"posts/2017-10-02-monorepo/index.md"},"buildId":"4c5a78e9-1332-43f5-89cd-e264f88db1b9","assetPrefix":"","nextExport":true,"err":null,"chunks":[]}
          module={}
          __NEXT_LOADED_PAGES__ = []
          __NEXT_LOADED_CHUNKS__ = []

          __NEXT_REGISTER_PAGE = function (route, fn) {
            __NEXT_LOADED_PAGES__.push({ route: route, fn: fn })
          }

          __NEXT_REGISTER_CHUNK = function (chunkName, fn) {
            __NEXT_LOADED_CHUNKS__.push({ chunkName: chunkName, fn: fn })
          }

          false
        </script><script async="" id="__NEXT_PAGE__/post" src="/_next/4c5a78e9-1332-43f5-89cd-e264f88db1b9/page/post.js"></script><script async="" id="__NEXT_PAGE__/_app" src="/_next/4c5a78e9-1332-43f5-89cd-e264f88db1b9/page/_app.js"></script><script async="" id="__NEXT_PAGE__/_error" src="/_next/4c5a78e9-1332-43f5-89cd-e264f88db1b9/page/_error.js"></script><script src="/_next/static/commons/main-8b9f7bccc4bc5dfcc317.js" async=""></script></body></html>