<!DOCTYPE html><html><head><meta charSet="utf-8" class="next-head next-head"/><title class="next-head">:-) TypeScript のテスト環境を考える</title><link rel="stylesheet" href="/static/bundle.css" class="next-head"/><link rel="preload" href="/_next/bdc80371-3ad7-4b47-8ed9-e61daaea7842/page/post.js" as="script"/><link rel="preload" href="/_next/bdc80371-3ad7-4b47-8ed9-e61daaea7842/page/_app.js" as="script"/><link rel="preload" href="/_next/bdc80371-3ad7-4b47-8ed9-e61daaea7842/page/_error.js" as="script"/><link rel="preload" href="/_next/static/commons/main-8b9f7bccc4bc5dfcc317.js" as="script"/></head><body><div id="__next"><header class="navbar"><div class="navbar-brand"><a class="navbar-item" href="/">:-)</a><div class="navbar-burger burger" data-target="navMenu"><span></span><span></span><span></span></div></div><div class="navbar-menu" id="navMenu"><div class="navbar-end"></div></div></header><section class="hero is-primary"><div class="hero-body"><div class="container"><h1 class="title">TypeScript のテスト環境を考える</h1></div></div></section><section class="section"><div class="container is-fluid"><div class="content"><div><h1>上手く動かない</h1>
<p><a href="https://travis-ci.org/9renpoto/ts/builds/156475663">https://travis-ci.org/9renpoto/ts/builds/156475663</a></p>
<ul>
<li>アバウトな構成</li>
</ul>
<pre><code class="language-js">&quot;devDependencies&quot;: {
  &quot;@9renpoto/eslint-config&quot;: &quot;^1.1.0&quot;,
  &quot;@9renpoto/tslint-config&quot;: &quot;^1.0.0&quot;,
  &quot;@types/mocha&quot;: &quot;^2.2.31&quot;,
  &quot;@types/power-assert&quot;: &quot;0.0.27&quot;,
  &quot;awesome-typescript-loader&quot;: &quot;^2.2.1&quot;,
  &quot;codecov&quot;: &quot;^1.0.1&quot;,
  &quot;eslint&quot;: &quot;^3.4.0&quot;,
  &quot;json-loader&quot;: &quot;^0.5.4&quot;,
  &quot;karma&quot;: &quot;^1.2.0&quot;,
  &quot;karma-coverage&quot;: &quot;^1.1.1&quot;,
  &quot;karma-firefox-launcher&quot;: &quot;^1.0.0&quot;,
  &quot;karma-mocha&quot;: &quot;^1.1.1&quot;,
  &quot;karma-sourcemap-loader&quot;: &quot;^0.3.7&quot;,
  &quot;karma-webpack&quot;: &quot;^1.8.0&quot;,
  &quot;mocha&quot;: &quot;^3.0.2&quot;,
  &quot;npm-run-all&quot;: &quot;^3.0.0&quot;,
  &quot;power-assert&quot;: &quot;^1.4.1&quot;,
  &quot;rimraf&quot;: &quot;^2.5.4&quot;,
  &quot;tslint&quot;: &quot;^3.15.1&quot;,
  &quot;typescript&quot;: &quot;^2.0.2&quot;,
  &quot;webpack&quot;: &quot;^1.13.2&quot;,
  &quot;webpack-espower-loader&quot;: &quot;^1.0.1&quot;
}
</code></pre>
<p><code>tsc</code> ・ <code>webpack</code> しても問題ないように見えるが、 <code>karma</code> を通した場合 <code>SyntaxError</code> など出てきて非常に厳しい。</p>
<p><a href="https://github.com/9renpoto/karma-power-assert-typescript-mocha-webpack-sample">https://github.com/9renpoto/karma-power-assert-typescript-mocha-webpack-sample</a></p>
<p>同様の構成で先に検証頂いているものを発見するも、現在構成との違いの無さに
こちらが動かない理由は不明、頭を悩ませる。</p></div></div></div></section></div><div id="__next-error"></div><script>
          __NEXT_DATA__ = {"props":{"pageProps":{"post":{"data":{"date":"2016-08-31T12:26:35.000Z","permalink":"/entry/2016/08/31/karma-webpack/","title":"TypeScript のテスト環境を考える","categories":["typescript","karma","mocha","power-assert"],"page":"post","_entry":"posts/2016-08-31-karma-webpack/index.md","name":"index","category":"2016-08-31-karma-webpack","url":"/entry/2016/08/31/karma-webpack/"},"content":"# 上手く動かない\n\n\u003chttps://travis-ci.org/9renpoto/ts/builds/156475663\u003e\n\n- アバウトな構成\n\n```js\n\"devDependencies\": {\n  \"@9renpoto/eslint-config\": \"^1.1.0\",\n  \"@9renpoto/tslint-config\": \"^1.0.0\",\n  \"@types/mocha\": \"^2.2.31\",\n  \"@types/power-assert\": \"0.0.27\",\n  \"awesome-typescript-loader\": \"^2.2.1\",\n  \"codecov\": \"^1.0.1\",\n  \"eslint\": \"^3.4.0\",\n  \"json-loader\": \"^0.5.4\",\n  \"karma\": \"^1.2.0\",\n  \"karma-coverage\": \"^1.1.1\",\n  \"karma-firefox-launcher\": \"^1.0.0\",\n  \"karma-mocha\": \"^1.1.1\",\n  \"karma-sourcemap-loader\": \"^0.3.7\",\n  \"karma-webpack\": \"^1.8.0\",\n  \"mocha\": \"^3.0.2\",\n  \"npm-run-all\": \"^3.0.0\",\n  \"power-assert\": \"^1.4.1\",\n  \"rimraf\": \"^2.5.4\",\n  \"tslint\": \"^3.15.1\",\n  \"typescript\": \"^2.0.2\",\n  \"webpack\": \"^1.13.2\",\n  \"webpack-espower-loader\": \"^1.0.1\"\n}\n```\n\n`tsc` ・ `webpack` しても問題ないように見えるが、 `karma` を通した場合 `SyntaxError` など出てきて非常に厳しい。\n\n\u003chttps://github.com/9renpoto/karma-power-assert-typescript-mocha-webpack-sample\u003e\n\n同様の構成で先に検証頂いているものを発見するも、現在構成との違いの無さに\nこちらが動かない理由は不明、頭を悩ませる。\n"}}},"page":"/post","pathname":"/post","query":{"_entry":"posts/2016-08-31-karma-webpack/index.md"},"buildId":"bdc80371-3ad7-4b47-8ed9-e61daaea7842","assetPrefix":"","nextExport":true,"err":null,"chunks":[]}
          module={}
          __NEXT_LOADED_PAGES__ = []
          __NEXT_LOADED_CHUNKS__ = []

          __NEXT_REGISTER_PAGE = function (route, fn) {
            __NEXT_LOADED_PAGES__.push({ route: route, fn: fn })
          }

          __NEXT_REGISTER_CHUNK = function (chunkName, fn) {
            __NEXT_LOADED_CHUNKS__.push({ chunkName: chunkName, fn: fn })
          }

          false
        </script><script async="" id="__NEXT_PAGE__/post" src="/_next/bdc80371-3ad7-4b47-8ed9-e61daaea7842/page/post.js"></script><script async="" id="__NEXT_PAGE__/_app" src="/_next/bdc80371-3ad7-4b47-8ed9-e61daaea7842/page/_app.js"></script><script async="" id="__NEXT_PAGE__/_error" src="/_next/bdc80371-3ad7-4b47-8ed9-e61daaea7842/page/_error.js"></script><script src="/_next/static/commons/main-8b9f7bccc4bc5dfcc317.js" async=""></script></body></html>