<!DOCTYPE html><html><head><meta charSet="utf-8" class="next-head"/><title class="next-head">:-) 入門chef</title><link rel="stylesheet" href="/static/bundle.css" class="next-head"/><link rel="preload" href="/_next/4b1f3a40-2cb8-4fcb-ac67-ba2d4dcde889/page/post.js" as="script"/><link rel="preload" href="/_next/4b1f3a40-2cb8-4fcb-ac67-ba2d4dcde889/page/_error.js" as="script"/><link rel="preload" href="/_next/ca3d14a921b57526bfb7026249009ffa/app.js" as="script"/></head><body><div><div id="__next"><div data-reactroot=""><div><header class="navbar"><div class="navbar-brand"><a class="navbar-item" href="/">:-)</a><div class="navbar-burger burger" data-target="navMenu"><span></span><span></span><span></span></div></div><div class="navbar-menu" id="navMenu"><div class="navbar-end"></div></div></header><section class="hero is-primary"><div class="hero-body"><div class="container"><h1 class="title">入門chef</h1></div></div></section><section class="section"><div class="container is-fluid"><div class="content"><div><h1>chef memo</h1>
<p>環境構築といえば、chefだという噂を随分と聞くようになってきましたが、
なんだかんだと使ってなかったのでメモ。
とはいえ、レシピは誰かが書いてるので、
今回は出来る限りレシピを使う方法で構築を目指す。</p>
<h2>前準備</h2>
<pre><code class="language-ruby"># Gemfileに記載
source &#x27;https://rubygems。org&#x27;  # URLの指定。呪文だと思って毎回書く

gem &#x27;berkshelf&#x27;
gem &#x27;chef&#x27;
gem &#x27;knife-solo&#x27;
</code></pre>
<p>必要なgemをいつものように。</p>
<pre><code class="language-sh">bundle install
</code></pre>
<p>chef-soloを使えるように初期設定を行う。</p>
<pre><code class="language-sh">bundle exec knife configure
</code></pre>
<h2>そろそろchef</h2>
<p>ひな形の生成。</p>
<pre><code class="language-bash">$ bundle exec knife solo init chef-repo
$ tree chef-repo/
chef-repo/
├── cookbooks
├── data_bags
├── nodes
├── roles
├── site-cookbooks
└── solo。rb
</code></pre>
<p>忘れないうちにコミット。</p>
<pre><code class="language-sh">cd chef-repo
git init
git add 。
git commit -m &#x27;first commit&#x27;
</code></pre>
<p>公式なり、Githubにて公開されているレシピを利用しやすくるものとして <strong>Berksfile</strong> があります。</p>
<pre><code class="language-ruby">site :opscode # Berksfile

cookbook &quot;apt&quot;
cookbook &quot;git&quot;
cookbook &quot;zsh&quot;
cookbook &#x27;vim&#x27;
cookbook &#x27;the_silver_searcher&#x27;
</code></pre>
<p>公開されているレシピの情報を記述しておけば、コマンド1つで落としてこれます。
便利。</p>
<pre><code class="language-sh">bundle exec berks install --permalink cookbooks
</code></pre>
<p>vagrant側でchefが使えるように以下のコマンドを実行。</p>
<pre><code class="language-sh">bundle exec knife solo prepare nodename
</code></pre>
<p>インストールしたいレシピを追加
node/nodename.json。</p>
<pre><code class="language-js">{
  &quot;run_list&quot;: [
    &quot;recipe[apt]&quot;,
    &quot;recipe[git]&quot;,
    &quot;recipe[zsh]&quot;,
    &quot;recipe[vim]&quot;,
    &quot;recipe[the_silver_searcher]&quot;
  ]
}
</code></pre>
<p>レシピはできたのでcookしましょう。</p>
<pre><code class="language-sh">bundle exec knife solo cook nodename
</code></pre>
<h2>参考</h2>
<ul>
<li><a href="https://qiita.com/uchiunyo/items/5aa243f7a39ae443e10d">qiita.com/uchiunyo/item</a></li>
</ul></div></div></div></section></div></div></div><div id="__next-error"></div></div><div><script>
          __NEXT_DATA__ = {"props":{"post":{"data":{"title":"入門chef","date":"2013-12-22T00:00:00.000Z","permalink":"/entry/2013/12/22/my-first-chef/","categories":["ruby","chef"],"page":"post","_entry":"posts/2013-12-22-my-first-chef/index.md","name":"index","category":"2013-12-22-my-first-chef","url":"/entry/2013/12/22/my-first-chef/"},"content":"# chef memo\n\n環境構築といえば、chefだという噂を随分と聞くようになってきましたが、\nなんだかんだと使ってなかったのでメモ。\nとはいえ、レシピは誰かが書いてるので、\n今回は出来る限りレシピを使う方法で構築を目指す。\n\n## 前準備\n\n```ruby\n# Gemfileに記載\nsource 'https://rubygems。org'  # URLの指定。呪文だと思って毎回書く\n\ngem 'berkshelf'\ngem 'chef'\ngem 'knife-solo'\n```\n\n必要なgemをいつものように。\n\n```sh\nbundle install\n```\n\nchef-soloを使えるように初期設定を行う。\n\n```sh\nbundle exec knife configure\n```\n\n## そろそろchef\n\nひな形の生成。\n\n```bash\n$ bundle exec knife solo init chef-repo\n$ tree chef-repo/\nchef-repo/\n├── cookbooks\n├── data_bags\n├── nodes\n├── roles\n├── site-cookbooks\n└── solo。rb\n```\n\n忘れないうちにコミット。\n\n```sh\ncd chef-repo\ngit init\ngit add 。\ngit commit -m 'first commit'\n```\n\n公式なり、Githubにて公開されているレシピを利用しやすくるものとして **Berksfile** があります。\n\n```ruby\nsite :opscode # Berksfile\n\ncookbook \"apt\"\ncookbook \"git\"\ncookbook \"zsh\"\ncookbook 'vim'\ncookbook 'the_silver_searcher'\n```\n\n公開されているレシピの情報を記述しておけば、コマンド1つで落としてこれます。\n便利。\n\n```sh\nbundle exec berks install --permalink cookbooks\n```\n\nvagrant側でchefが使えるように以下のコマンドを実行。\n\n```sh\nbundle exec knife solo prepare nodename\n```\n\nインストールしたいレシピを追加\nnode/nodename.json。\n\n```js\n{\n  \"run_list\": [\n    \"recipe[apt]\",\n    \"recipe[git]\",\n    \"recipe[zsh]\",\n    \"recipe[vim]\",\n    \"recipe[the_silver_searcher]\"\n  ]\n}\n```\n\nレシピはできたのでcookしましょう。\n\n```sh\nbundle exec knife solo cook nodename\n```\n\n## 参考\n\n- [qiita.com/uchiunyo/item](https://qiita.com/uchiunyo/items/5aa243f7a39ae443e10d)\n"}},"pathname":"/post","query":{"_entry":"posts/2013-12-22-my-first-chef/index.md"},"buildId":"4b1f3a40-2cb8-4fcb-ac67-ba2d4dcde889","buildStats":{"app.js":{"hash":"ca3d14a921b57526bfb7026249009ffa"}},"assetPrefix":"","nextExport":true,"err":null,"chunks":[]}
          module={}
          __NEXT_LOADED_PAGES__ = []
          __NEXT_LOADED_CHUNKS__ = []

          __NEXT_REGISTER_PAGE = function (route, fn) {
            __NEXT_LOADED_PAGES__.push({ route: route, fn: fn })
          }

          __NEXT_REGISTER_CHUNK = function (chunkName, fn) {
            __NEXT_LOADED_CHUNKS__.push({ chunkName: chunkName, fn: fn })
          }
        </script><script async="" id="__NEXT_PAGE__/post" type="text/javascript" src="/_next/4b1f3a40-2cb8-4fcb-ac67-ba2d4dcde889/page/post.js"></script><script async="" id="__NEXT_PAGE__/_error" type="text/javascript" src="/_next/4b1f3a40-2cb8-4fcb-ac67-ba2d4dcde889/page/_error.js"></script><div></div><script type="text/javascript" src="/_next/ca3d14a921b57526bfb7026249009ffa/app.js" async=""></script></div></body></html>